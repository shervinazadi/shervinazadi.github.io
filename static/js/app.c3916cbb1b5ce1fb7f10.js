webpackJsonp([1],{"5mxk":function(e,t){},AMBn:function(e,t){},DuPI:function(e,t){},KpPp:function(e,t,n){var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t){var n;function i(e){return"function"==typeof e.key?e.key():e.key}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){var t=e.val(),n=r(t)?t:{".value":t};return n[".key"]=i(e),n}function s(e,t){for(var n=0;n<e.length;n++)if(e[n][".key"]===t)return n;return-1}function o(e,t,n){var o=!1,c=null,h=null;if(r(n)&&n.hasOwnProperty("source")&&(o=n.asObject,c=n.cancelCallback,h=n.readyCallback,n=n.source),!r(n))throw new Error("VueFire: invalid Firebase binding source.");var d,u=("function"==typeof(d=n).ref?d=d.ref():"object"==typeof d.ref&&(d=d.ref),d);e.$firebaseRefs[t]=u,e._firebaseSources[t]=n,c&&(c=c.bind(e)),o?function(e,t,n,i){l(e,t,{});var r=n.on("value",function(n){e[t]=a(n)},i);e._firebaseListeners[t]={value:r}}(e,t,n,c):function(e,t,n,r){var o=[];l(e,t,o);var c=n.on("child_added",function(e,t){var n=t?s(o,t)+1:0;o.splice(n,0,a(e))},r),h=n.on("child_removed",function(e){var t=s(o,i(e));o.splice(t,1)},r),d=n.on("child_changed",function(e){var t=s(o,i(e));o.splice(t,1,a(e))},r),u=n.on("child_moved",function(e,t){var n=s(o,i(e)),r=o.splice(n,1)[0],a=t?s(o,t)+1:0;o.splice(a,0,r)},r);e._firebaseListeners[t]={child_added:c,child_removed:h,child_changed:d,child_moved:u}}(e,t,n,c),h&&n.once("value",h.bind(e))}function l(e,t,i){t in e?e[t]=i:n.util.defineReactive(e,t,i)}function c(e){e.$firebaseRefs||(e.$firebaseRefs=Object.create(null),e._firebaseSources=Object.create(null),e._firebaseListeners=Object.create(null))}var h={created:function(){var e=this.$options.firebase;if("function"==typeof e&&(e=e.call(this)),e)for(var t in c(this),e)o(this,t,e[t])},beforeDestroy:function(){if(this.$firebaseRefs){for(var e in this.$firebaseRefs)this.$firebaseRefs[e]&&this.$unbind(e);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}}};function d(e){(n=e).mixin(h);var t=n.config.optionMergeStrategies;t.firebase=t.provide,n.prototype.$bindAsObject=function(e,t,n,i){c(this),o(this,e,{source:t,asObject:!0,cancelCallback:n,readyCallback:i})},n.prototype.$bindAsArray=function(e,t,n,i){c(this),o(this,e,{source:t,cancelCallback:n,readyCallback:i})},n.prototype.$unbind=function(e){!function(e,t){var n=e._firebaseSources&&e._firebaseSources[t];if(!n)throw new Error('VueFire: unbind failed: "'+t+'" is not bound to a Firebase reference.');var i=e._firebaseListeners[t];for(var r in i)n.off(r,i[r]);e[t]=null,e.$firebaseRefs[t]=null,e._firebaseSources[t]=null,e._firebaseListeners[t]=null}(this,e)}}"undefined"!=typeof window&&window.Vue&&d(window.Vue),e.exports=d}])},e.exports=i()},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("kxiW"),a=n.n(r),s={props:["label","nodes","depth"],data:()=>({showChildren:!1,sign:"+"}),name:"tree-menu",computed:{indent(){return{transform:`translate(${25*this.depth}px)`}},indent_sign(){return{transform:`translate(${20*this.depth}px)`}}},methods:{toggleChildren(){this.showChildren=!this.showChildren,"+"==this.sign?this.sign="-":this.sign="+"}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-menu",attrs:{id:"vert-menu"}},[n("div",{style:e.indent_sign,attrs:{id:"side-by-side"},on:{click:e.toggleChildren}},[e._v(e._s(e.sign))]),e._v(" "),n("div",{style:e.indent,attrs:{id:"side-by-side"}},[e._v(e._s(e.label))]),e._v(" "),e.showChildren?n("div",e._l(e.nodes,function(t){return n("tree-menu",{key:t.label,attrs:{nodes:t.nodes,label:t.label,depth:e.depth+1}})}),1):e._e()])},staticRenderFns:[]};var l={name:"navbar",components:{TreeMenu:n("VU/8")(s,o,!1,function(e){n("5mxk")},null,null).exports},data:()=>({isLoggedIn:!1,currentUser:!1,tree:{label:"root",nodes:[{label:"item1",nodes:[{label:"item1.1"},{label:"item1.2",nodes:[{label:"item1.2.1"}]}]},{label:"item2"}]}}),created(){a.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=a.a.auth().currentUser.email)},methods:{logout:function(){a.a.auth().signOut().then(()=>{this.$router.push("/login"),window.location.reload(!0)})}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("tree-menu",{attrs:{label:this.tree.label,nodes:this.tree.nodes,depth:0}})],1)},staticRenderFns:[]},h={name:"App",components:{Navbar:n("VU/8")(l,c,!1,null,null,null).exports}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Navbar"),this._v(" "),t("div",[t("router-view")],1)],1)},staticRenderFns:[]},u=n("VU/8")(h,d,!1,null,null,null).exports,p=n("/ocq");n("881v");const m=a.a.initializeApp({apiKey:"AIzaSyCeOmk2Dn8KK175ip0Pmgb7cu1kd7j_M8o",authDomain:"playscapes01.firebaseapp.com",databaseURL:"https://playscapes01.firebaseio.com",projectId:"playscapes01",storageBucket:"playscapes01.appspot.com",messagingSenderId:"370840827427"});let v=m.firestore(),f=m.database();var w=n("dEcQ"),g=n.n(w),y={name:"dashboard",data:()=>({employees:[],isLoggedIn:!1,currentUser:!1,mdContent:null}),created(){a.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=a.a.auth().currentUser.email,this.mdContent=g.a.html),v.collection("employees").orderBy("employee_id").get().then(e=>{e.forEach(e=>{const t={id:e.id,employee_id:e.data().employee_id,name:e.data().name,dept:e.data().dept};this.employees.push(t)})}),console.log(this.employees)},methods:{logout:function(){a.a.auth().signOut().then(()=>{this.$router.push("/login"),window.location.reload(!0)})}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-5",attrs:{id:"dashboard"}},[n("div",{staticClass:"card"},[n("table",{staticClass:"table table-striped"},[e._m(0),e._v(" "),n("tbody",e._l(e.employees,function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.employee_id))]),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[e._v(e._s(t.dept))]),e._v(" "),n("td",[n("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:{name:"view-employee",params:{employee_id:t.employee_id}}}},[e._v("view")])],1)])}),0)])]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.mdContent)}})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[this._v("ID")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Owner")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Overview")])])])}]},b=n("VU/8")(y,_,!1,null,null,null).exports,x={name:"new-employee",data:()=>({employee_id:null,name:null,dept:null}),methods:{saveEmployee(){v.collection("employees").add({employee_id:this.employee_id,name:this.name,dept:this.dept,position:this.position}).then(e=>{this.$router.push("/")}).catch(e=>console.log(err))}}},D={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-5",attrs:{id:"new-employee"}},[n("div",{staticClass:"card"},[e._m(0),e._v(" "),n("div",{staticClass:"card-body"},[n("form",{staticClass:"col s12",on:{submit:function(t){return t.preventDefault(),e.saveEmployee(t)}}},[n("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee_id,expression:"employee_id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.employee_id},on:{input:function(t){t.target.composing||(e.employee_id=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[e._m(3),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.dept,expression:"dept"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.dept},on:{input:function(t){t.target.composing||(e.dept=t.target.value)}}})]),e._v(" "),n("hr"),e._v(" "),n("div",[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")]),e._v(" "),n("router-link",{staticClass:"btn btn-outline-danger",attrs:{to:"/"}},[e._v("Cancel")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h4",[this._v("Edit Player")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Player ID")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Role")])])}]},C=n("VU/8")(x,D,!1,null,null,null).exports,A={name:"edit-employee",data:()=>({employee_id:null,name:null,dept:null,position:null}),beforeRouteEnter(e,t,n){v.collection("employees").where("employee_id","==",e.params.employee_id).get().then(e=>{e.forEach(e=>{n(t=>{t.employee_id=e.data().employee_id,t.name=e.data().name,t.dept=e.data().dept})})})},watch:{$route:"fetchData"},methods:{fetchData(){v.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{this.employee_id=e.data().employee_id,this.name=e.data().name,this.dept=e.data().dept})})},updateEmployee(){confirm("Sure?")&&v.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{e.ref.update({employee_id:this.employee_id,name:this.name,dept:this.dept}).then(()=>{this.$router.push({name:"view-employee",params:{employee_id:this.employee_id}})})})})}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-5",attrs:{id:"edit-employee"}},[n("div",{staticClass:"card"},[e._m(0),e._v(" "),n("div",{staticClass:"card-body"},[n("form",{staticClass:"col s12",on:{submit:function(t){return t.preventDefault(),e.updateEmployee(t)}}},[n("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee_id,expression:"employee_id"}],staticClass:"form-control",attrs:{type:"text",disabled:"",required:""},domProps:{value:e.employee_id},on:{input:function(t){t.target.composing||(e.employee_id=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[e._m(3),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.dept,expression:"dept"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.dept},on:{input:function(t){t.target.composing||(e.dept=t.target.value)}}})]),e._v(" "),n("hr"),e._v(" "),n("div",[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")]),e._v(" "),n("router-link",{staticClass:"btn btn-outline-danger",attrs:{to:"/"}},[e._v("Cancel")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h4",[this._v("Edit Game")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Game ID")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Owner")])])}]},k=n("VU/8")(A,E,!1,null,null,null).exports,H={name:"view-employee",data:()=>({employee_id:null,name:null,dept:null}),beforeRouteEnter(e,t,n){v.collection("employees").where("employee_id","==",e.params.employee_id).get().then(e=>{e.forEach(e=>{n(t=>{t.employee_id=e.data().employee_id,t.name=e.data().name,t.dept=e.data().dept})})})},watch:{$route:"fetchData"},methods:{fetchData(){v.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{this.employee_id=e.data().employee_id,this.name=e.data().name,this.dept=e.data().dept})})},deleteEmployee(){confirm("Sure?")&&v.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{e.ref.delete(),this.$router.push("/")})})},doNothing(){console.log("to be implemented")},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},tempAnchorList:function(){var e=[];return anchorsRef.once("value",function(t){t.forEach(function(t){var n={Key:t.key,Data:t.val()};e.push(n)})}),e}}},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-5",attrs:{id:"view-employee"}},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("h4",[e._v(e._s(e.name))])]),e._v(" "),n("ul",{staticClass:"list-group list-group-flush"},[n("li",{staticClass:"list-group-item"},[e._v("Game ID : "+e._s(e.employee_id))]),e._v(" "),n("li",{staticClass:"list-group-item"},[e._v("Owner : "+e._s(e.dept))]),e._v(" "),n("router-link",{staticClass:"list-group-item btn btn-outline-primary",attrs:{to:"/rtplay"}},[e._v("Playboard")]),e._v(" "),n("router-link",{staticClass:"list-group-item btn btn-outline-warning",attrs:{to:"/rtthreed"}},[e._v("3D (under construction)")])],1)]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"card"},[n("ul",{staticClass:"list-group list-group-flush"},[n("router-link",{staticClass:"list-group-item btn btn-outline-dark",attrs:{to:"/"}},[e._v("Back")]),e._v(" "),n("router-link",{staticClass:"list-group-item btn btn-outline-primary",attrs:{to:{name:"edit-employee",params:{employee_id:e.employee_id}}}},[e._v("Edit Information")]),e._v(" "),n("button",{staticClass:"list-group-item btn btn-outline-danger",on:{click:e.doNothing}},[e._v("Delete (to be implemented)")])],1),e._v(" "),n("div",{staticClass:"fixed-action-btn"},[n("router-link",{staticClass:"btn-floating btn-larg red",attrs:{to:{name:"edit-employee",params:{employee_id:e.employee_id}}}},[n("i",{staticClass:"fa fa-pencil"})])],1)])])},staticRenderFns:[]},I=n("VU/8")(H,M,!1,null,null,null).exports,T={name:"login",data:function(){return{email:"",password:""}},methods:{login:function(e){a.a.auth().signInWithEmailAndPassword(this.email,this.password).then(e=>{window.location.reload(!0),this.$router.push("/")},e=>{alert(e.message)}),e.preventDefault()},register:function(e){a.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(e=>{alert("Account Created"),window.location.reload(!0),this.$router.push("/")},e=>{alert(e.message)}),e.preventDefault()}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-5"},[n("div",{staticClass:"card"},[e._m(0),e._v(" "),n("div",{staticClass:"card-body"},[n("form",[n("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),n("buttun",{staticClass:"btn btn-outline-primary",on:{click:e.login}},[e._v("Sign In")]),e._v(" "),n("buttun",{staticClass:"btn btn-outline-success",on:{click:e.register}},[e._v("Sign Up")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h3",[this._v("Login")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Email")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Password")])])}]},R=n("VU/8")(T,S,!1,null,null,null).exports,$={name:"register",data:function(){return{email:"",password:""}},methods:{register:function(e){a.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(e=>{alert("Account Created"),window.location.reload(!0),this.$router.push("/")},e=>{alert(e.message)}),e.preventDefault()}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pt-5"},[n("div",{staticClass:"card text-black bg-light mb-3"},[e._m(0),e._v(" "),n("div",{staticClass:"card-body"},[n("form",[n("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),n("buttun",{staticClass:"btn btn-outline-success",on:{click:e.register}},[e._v("Register")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h3",[this._v("Register")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Email")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Password")])])}]},L=n("VU/8")($,P,!1,null,null,null).exports,G=(n("YrBu"),n("vwbq"),n("M4fF"),{name:"playboard",data:()=>({employees:[],nrad:7,space:1,color:"#aaa",maxID:0,ratio:32,nindex:0,curAnchor:-1,grid:[],anchors:[],window:{width:0,height:0}}),computed:{numi(){return this.window.width/this.ratio},numj(){return this.window.height/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.setGrid(),this.getAnchorLocationFromServer(),this.calculateTheField(),window.addEventListener("keydown",e=>{"s"==e.key&&this.addAnchor(0),"x"==e.key&&this.addAnchor(1),"Backspace"!=e.key&&"d"!=e.key||this.deleteAnchor()})},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(e){var t={id:this.maxID,x:0,y:0,v:e};this.anchors.push(t),this.curAnchor=this.maxID,this.maxID+=1,this.addAnchorToServer(t),this.calculateTheField()},deleteAnchor(){if(-1!=this.curAnchor){var e,t=[];for(e=0;e<this.anchors.length;e++){var n=this.anchors[e];this.curAnchor!=n.id?t.push(n):(this.deleteAnchorFromServer(n),console.log("anchor "+String(n.id)+" deleted"))}this.anchors=t,this.curAnchor=-1,this.calculateTheField()}},getAnchorLocationFromServer:function(){v.collection("anchors").get().then(e=>{e.forEach(e=>{var t=this.setHexColor(e.data().v);e.data().id>this.maxID&&(this.maxID=e.data().id+1);const n={id:e.data().id,x:e.data().x,y:e.data().y,v:e.data().v,c:t};this.anchors.push(n)})})},addAnchorToServer:function(e){v.collection("anchors").add(e)},updateAnchorLocationOnServer:function(e){v.collection("anchors").where("id","==",e.id).get().then(t=>{t.forEach(t=>{t.ref.update({x:e.x,y:e.y})})})},deleteAnchorFromServer:function(e){v.collection("anchors").where("id","==",e.id).get().then(e=>{e.forEach(e=>{e.ref.delete()})})},setHexColor:function(e){return n("YrBu")("hsl("+String(240+120*e)+", 100%, 50%)").toHexString()},handleClickPoint:function(e){var t,n;for(n=0;n<this.anchors.length;n++)this.anchors[n].id==this.curAnchor&&(t=this.anchors[n]);t.x=e.x,t.y=e.y,this.updateAnchorLocationOnServer(t),this.calculateTheField(),console.log("anchor "+String(t.id)+" moved")},handleClickAnchor:function(e){this.curAnchor=e.id,console.log("anchor "+String(e.id)+" selected")},setGrid(){var e,t,n=1;for(e=0;e<this.numi;e++)for(t=0;t<this.numj;t++){var i={id:n+=1,x:e,y:t,v:.5};this.grid.push(i)}},setAnchors(){var e;for(e=0;e<2;e++){var t={id:e,x:e,y:e,v:e};this.anchors.push(t)}},fit:function(e,t,n,i,r){return e>n&&(e=n),e<t&&(e=t),i+(r-i)*(e-t)/(n-t)},calculateTheField(){var e;for(e=0;e<this.grid.length;e++){var t,n=this.grid[e],i=0,r=0;for(t=0;t<this.anchors.length;t++){var a=this.anchors[t],s=Math.pow(a.x-n.x,2),o=Math.pow(a.y-n.y,2),l=Math.pow(s+o,.5);if(0==l){i=1e-6,r=a.v;break}var c=Math.pow(l,-3);r+=a.v*c,i+=(1-a.v)*c}var h=r/(r+i);n.v=this.fit(h,.25,.75,0,1),n.c=this.setHexColor(n.v)}for(t=0;t<this.anchors.length;t++){(a=this.anchors[t]).c=this.setHexColor(a.v)}}}}),W={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pt-5",attrs:{id:"playboard"}},[n("svg",{attrs:{id:"picture",viewBox:"-250 -250 500 500"}},[n("circle",{attrs:{cx:(-1.5-e.numi/2)*(e.nrad+e.space)*2,cy:(.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"blue",stroke:"#999"},on:{click:function(t){return e.addAnchor(0)}}}),e._v(" "),n("circle",{attrs:{cx:(-1.5-e.numi/2)*(e.nrad+e.space)*2,cy:(2.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"red",stroke:"#999"},on:{click:function(t){return e.addAnchor(1)}}}),e._v(" "),n("circle",{attrs:{cx:(-1.5-e.numi/2)*(e.nrad+e.space)*2,cy:(4.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"#333",stroke:"#999"},on:{click:function(t){return e.deleteAnchor()}}}),e._v(" "),e._l(e.grid,function(t){return[n("circle",{key:t.id,attrs:{cx:(t.x-e.numi/2)*(e.nrad+e.space)*2,cy:(t.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad,fill:"#ddd",stroke:t.c,"stroke-width":"1.4"},on:{click:function(n){return e.handleClickPoint(t)}}})]}),e._v(" "),e._l(e.anchors,function(t){return[n("circle",{key:-t.id,attrs:{cx:(t.x-e.numi/2)*(e.nrad+e.space)*2,cy:(t.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad-2,fill:t.c},on:{click:function(n){return e.handleClickAnchor(t)}}})]})],2)])},staticRenderFns:[]};var B=n("VU/8")(G,W,!1,function(e){n("DuPI")},null,null).exports;let F=f.ref("anchors");var z={name:"rtplayboard",firebase:{anchors:F},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},startTime:0,firstRound:0}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),window.addEventListener("keydown",e=>{"s"==e.key&&this.addAnchor(0),"x"==e.key&&this.addAnchor(1),"Backspace"!=e.key&&"d"!=e.key||this.deleteAnchor()})},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),this.setGrid(),this.anchorManualUpdate(),this.calculateTheField(),this.recalc()},methods:{anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},recalc:function(){this.intervalid1=setInterval(()=>{var e=this.anchorManual;this.anchorManualUpdate();var t=this.anchorManual;(this.arraysEqual(e,t)||this.calculateTheField(),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.calculateTheField(),this.firstRound=1))},1e3/30)},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].Data.id!==t[n].Data.id)return!1;if(e[n].Data.x!==t[n].Data.x)return!1;if(e[n].Data.y!==t[n].Data.y)return!1;if(e[n].Data.v!==t[n].Data.v)return!1}return!0},maxID(){var e,t=1,n=this.anchorManual;for(e=0;e<n.length;e++){var i=n[e].Data;t<=i.id&&(t=i.id+1)}return t},tempAnchorList:function(){var e=[];return F.once("value",function(t){t.forEach(function(t){var n={Key:t.key,Data:t.val()};e.push(n)})}),e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(e){var t={id:this.maxID(),x:0,y:0,v:e};F.push(t),this.curAnchor=t.id,console.log("anchor "+this.curAnchor+" added")},deleteAnchor(){var e=0;if(-1!=this.curAnchor){for(var t=this.anchorManual,n=0;n<t.length;n++){var i=t[n].Data,r=t[n].Key;this.curAnchor==i.id&&(F.child(r).remove(),e=1)}console.log("anchor "+this.curAnchor+" added"),this.curAnchor=-1}else console.log("anchor "+String(this.curAnchor)+" does not exist anymore");0==e&&console.log("anchor "+String(this.curAnchor)+" does not exist anymore")},setHexColor:function(e){return n("YrBu")("hsl("+String(240+120*e)+", 100%, 50%)").toHexString()},setHexColorPlusUpdates:function(e){var t=n("YrBu"),i="hsl("+String(240+120*e)+", 100%, 50%)";return this.calculateTheField(),t(i).toHexString()},handleClickPoint:function(e){for(var t=0,n=this.anchorManual,i=0;i<n.length;i++){var r=n[i].Data,a=n[i].Key;if(this.curAnchor==n[i].Data.id){r=n[i].Data,a=n[i].Key,t=1;break}}1==t?(r.x=e.x,r.y=e.y,F.child(a).set(r),console.log("anchor "+String(r.id)+" moved"),this.calculateTheField()):(console.log("anchor "+String(this.curAnchor)+" does not exist anymore"),this.curAnchor=-1)},handleClickAnchor:function(e){this.curAnchor=e.id,console.log("anchor "+String(e.id)+" selected")},setGrid(){var e,t,n=1;for(e=0;e<this.numi;e++)for(t=0;t<this.numj;t++){var i={id:n+=1,x:e,y:t,v:.5};this.grid.push(i)}},fit:function(e,t,n,i,r){return e>n&&(e=n),e<t&&(e=t),i+(r-i)*(e-t)/(n-t)},calculateTheField:function(){var e,t=this.anchorManual;for(e=0;e<this.grid.length;e++){var n,i=this.grid[e],r=0,a=0;for(n=0;n<t.length;n++){var s=t[n].Data,o=Math.pow(s.x-i.x,2),l=Math.pow(s.y-i.y,2),c=Math.pow(o+l,.5);if(0==c){r=1e-6,a=s.v;break}var h=Math.pow(c,-3);a+=s.v*h,r+=(1-s.v)*h}var d=a/(a+r);i.v=this.fit(d,0,1,0,1)}this.calcCount+=1},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"rtplayboard"}},[n("svg",{attrs:{width:e.WIDTH(),height:e.HEIGHT(),viewBox:e.viewBox()}},[n("circle",{attrs:{cx:(-1.5-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"blue",stroke:"#999"},on:{click:function(t){return e.addAnchor(0)}}}),e._v(" "),n("circle",{attrs:{cx:(-1.5-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(2.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"red",stroke:"#999"},on:{click:function(t){return e.addAnchor(1)}}}),e._v(" "),n("circle",{attrs:{cx:(-1.5-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(4.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"#333",stroke:"#999"},on:{click:function(t){return e.deleteAnchor()}}}),e._v(" "),e._l(e.grid,function(t){return[n("circle",{key:t.id,attrs:{cx:(t.x-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(t.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad,fill:"#ddd",stroke:e.setHexColor(t.v),"stroke-width":"2"},on:{click:function(n){return e.handleClickPoint(t)}}})]}),e._v(" "),e._l(e.anchorManual,function(t){return[n("circle",{key:-t.Data.id,attrs:{cx:(t.Data.x-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(t.Data.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad-2,fill:e.setHexColor(t.Data.v)},on:{click:function(n){return e.handleClickAnchor(t.Data)}}})]})],2)])},staticRenderFns:[]};var j=n("VU/8")(z,U,!1,function(e){n("WV/5")},null,null).exports,q=n("Ml+6");let V=f.ref("anchors");var O={name:"threed",data:()=>({tolerance:.1,intervalid1:"",anchorManual:[],camera:null,scene:null,renderer:null,meshes:[]}),mounted(){this.recalc(),this.init(),this.tempAnchorList(),this.setAnalysisGrid(this.tolerance),this.constructMeshes(),this.addMeshesToScene(),this.animate()},beforeDestroy(){clearInterval(this.intervalid1)},methods:{init:function(){let e=document.getElementById("threed");this.scene=new q.Scene,this.scene.background=new q.Color(16777215),this.camera=new q.PerspectiveCamera(40,this.WIDTH()/this.HEIGHT(),1,1e3),this.camera.position={x:4,y:4,z:10};let t=new q.Vector3(0,0,0);this.camera.lookAt(t),this.renderer=new q.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.makeBox(2,2,2),this.makeCube(2.005)},addMeshesToScene:function(){for(var e=0;e<this.meshes.length;e++)this.scene.add(this.meshes[e])},animate:function(){requestAnimationFrame(this.animate),this.meshes[0].rotation.y+=.005,this.meshes[1].rotation.y+=.005,this.renderer.render(this.scene,this.camera)},makeBox:function(e,t,n){let i=new q.BoxGeometry(e,t,n),r=new q.LineBasicMaterial({color:16777215,linewidth:1,linecap:"round",linejoin:"round",blending:q.AdditiveBlending,transparent:!0,opacity:.8}),a=new q.Mesh(i,r);this.meshes.push(a)},makePlane:function(e){let t=new q.PlaneGeometry(e,e),n=new q.MeshBasicMaterial({color:13421772,side:q.DoubleSide}),i=new q.Mesh(t,n);i.rotation.x=Math.PI/2,this.meshes.push(i)},makeCube:function(e){var t=this.cube(e),n=new q.LineSegments(t,new q.LineBasicMaterial({color:0,dashSize:.02,gapSize:.01}));n.computeLineDistances(),this.meshes.push(n)},cube:function(e){var t=.5*e,n=new q.BufferGeometry,i=[];return i.push(-t,-t,-t,-t,t,-t,-t,t,-t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,-t,-t,t,-t,t,t,-t,t,t,t,t,t,t,t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,t,-t,t,-t,-t,t,t,t,t,-t,t,t,t,t,-t,-t,t,-t,t),n.addAttribute("position",new q.Float32BufferAttribute(i,3)),n},WIDTH:function(){return 2*window.innerWidth},HEIGHT:function(){return 2*(window.innerHeight-62)},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},tempAnchorList:function(){var e=[];return V.once("value",function(t){t.forEach(function(t){var n={Key:t.key,Data:t.val()};e.push(n)})}),e},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},recalc:function(){this.intervalid1=setInterval(()=>{this.anchorManualUpdate(),this.setAnalysisGrid(this.tol)},100)},setAnalysisGrid:function(e){var t=this.anchorManual;if(t.length>0){for(var n,i,r=t[0].Data.x,a=t[0].Data.y,s=0;s<t.length;s++)t[s].Data.x>r&&(r=t[s].Data.x),t[s].Data.x<n&&(n=t[s].Data.x),t[s].Data.y>a&&(a=t[s].Data.y),t[s].Data.y<i&&(i=t[s].Data.y);console.loh("i got here"),console.log(n,r,i,a)}}}},N={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"threed"}})},staticRenderFns:[]};var K=n("VU/8")(O,N,!1,function(e){n("uaeV")},"data-v-7a44f94c",null).exports,X=n("qKrd");const Y=n.n(X)()(q);let Q=f.ref("anchors");var J={name:"rtthreed",firebase:{anchors:Q},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},tolerance:.71,rotation:0,extrusionHeight:1,startTime:0,firstRound:0,camera:null,control:null,scene:null,renderer:null,meshes:[]}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),console.log(Y),this.init(),this.constructMeshes(),this.addMeshesToScene(),this.initialRender(),console.log("start"),this.recalc()},methods:{init:function(){let e=document.getElementById("rtthreed");this.scene=new q.Scene,this.scene.background=new q.Color(16777215);var t=new q.AmbientLight(16777215);this.scene.add(t),this.camera=new q.OrthographicCamera(this.WIDTH()/-80,this.WIDTH()/80,this.HEIGHT()/80,this.HEIGHT()/-80,.01,50),this.camera.position.set(16,20,16);let n=new q.Vector3(4,0,4);this.camera.lookAt(n),this.renderer=new q.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),this.renderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.renderer.domElement),this.controls=new Y(this.camera),this.controls.enableZoom=!0,this.controls.enableRotate=!1,this.controls.autoRotate=!1,this.controls.autoRotateSpeed=.5,this.controls.panSpeed=.5,this.controls.rotateSpeed=.7,this.controls.enableDamping=!0,this.controls.dampingFactor=1,this.controls.minPolarAngle=4*-Math.PI/9,this.controls.maxPolarAngle=4*Math.PI/9,this.controls.update(),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.drawThresholds(this.tolerance),this.setField(this.tolerance)},addMeshesToScene:function(){for(var e=0;e<this.meshes.length;e++)this.scene.add(this.meshes[e])},initialRender:function(){this.renderer.render(this.scene,this.camera)},recalc:function(){this.intervalid1=setInterval(()=>{var e=this.anchorManual;this.anchorManualUpdate();var t=this.anchorManual;(this.arraysEqual(e,t)?console.log("no change"):(console.log("updating"),this.toUpdate()),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.toUpdate(),this.firstRound=1));this.controls.update(),this.renderer.render(this.scene,this.camera)},1e3/30)},toUpdate:function(){var e=this.scene.getObjectByName("toberefreshed");this.scene.remove(e);var t=this.scene.getObjectByName("toberefreshed1");this.scene.remove(t),this.drawThresholds(this.tolerance/12),this.scene.add(this.meshes[this.meshes.length-1]),this.setField(this.tolerance),this.scene.add(this.meshes[this.meshes.length-1])},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].Data.id!==t[n].Data.id)return!1;if(e[n].Data.x!==t[n].Data.x)return!1;if(e[n].Data.y!==t[n].Data.y)return!1;if(e[n].Data.v!==t[n].Data.v)return!1}return!0},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},fit:function(e,t,n,i,r){return e>n&&(e=n),e<t&&(e=t),i+(r-i)*(e-t)/(n-t)},drawThresholds:function(e){var t=this.anchorManual,n=0,i=0,r=0,a=0;if(t.length>0){n=t[0].Data.x,i=t[0].Data.x,r=t[0].Data.y,a=t[0].Data.y;for(var s=0;s<t.length;s++)t[s].Data.x>i&&(i=t[s].Data.x),t[s].Data.x<n&&(n=t[s].Data.x),t[s].Data.y>a&&(a=t[s].Data.y),t[s].Data.y<r&&(r=t[s].Data.y);n-=2,r-=2,i+=2,a+=2}var o=(i-n)/e,l=(a-r)/e,c=new q.BufferGeometry,h=[],d=1;for(s=0;s<o;s++)for(var u=0;u<l;u++){var p=s*e,m=u*e,v=this.evalIntensity(p,m,t),f=this.evalIntensity(p+e,m,t);if((v-.5)*(f-.5)<=0){var w=p+(v<f?this.fit(.5,v,f,0,1):this.fit(.5,f,v,1,0))*e,g=m;h.push(w+n,0,g+r),h.push(w+n,this.extrusionHeight,g+r),d++}var y=this.evalIntensity(p,m+e,t);if((v-.5)*(y-.5)<=0){g=m+(v<y?this.fit(.5,v,y,0,1):this.fit(.5,y,v,1,0))*e,w=p;h.push(w+n,0,g+r),h.push(w+n,this.extrusionHeight,g+r),d++}}var _=new Float32Array(3*d*2);for(s=0;s<3*d*2;s++)_[s]=h[s];c.addAttribute("position",new q.BufferAttribute(_,3));var b=new q.LineSegments(c,new q.LineBasicMaterial({color:0}));b.name="toberefreshed",this.meshes.push(b)},evalIntensity:function(e,t,n){var i,r=0,a=0;for(i=0;i<n.length;i++){var s=n[i].Data,o=Math.pow(s.x-e,2),l=Math.pow(s.y-t,2),c=Math.pow(o+l,.5);if(0==c){r=1e-6,a=s.v;break}var h=Math.pow(c,-3);a+=s.v*h,r+=(1-s.v)*h}var d=a/(a+r);return this.fit(d,0,1,0,1)},setField:function(e){var t=this.anchorManual,n=0,i=0,r=0,a=0;if(t.length>0){n=t[0].Data.x,i=t[0].Data.x,r=t[0].Data.y,a=t[0].Data.y;for(var s=0;s<t.length;s++)t[s].Data.x>i&&(i=t[s].Data.x),t[s].Data.x<n&&(n=t[s].Data.x),t[s].Data.y>a&&(a=t[s].Data.y),t[s].Data.y<r&&(r=t[s].Data.y);n-=2,r-=2,i+=2,a+=2}var o=Math.ceil((i-n)/e),l=Math.ceil((a-r)/e),c=new q.BufferGeometry,h=(new q.Color(1,0,0),o*l),d=new Float32Array(3*h),u=new Float32Array(3*h),p=[],m=0;for(s=0;s<o;s++)for(var v=0;v<l;v++){var f,w=s*e,g=v*e,y=0,_=0;for(f=0;f<t.length;f++){var b=t[f].Data,x=Math.pow(b.x-w,2),D=Math.pow(b.y-g,2),C=Math.pow(x+D,.5);if(0==C){y=1e-6,_=b.v;break}var A=Math.pow(C,-3);_+=b.v*A,y+=(1-b.v)*A}var E=_/(_+y),k=this.fit(E,0,1,0,1);d[3*m]=w+n,d[3*m+1]=0,d[3*m+2]=g+r;u[3*m]=k,u[3*m+1]=0,u[3*m+2]=1-k,m++}for(s=0;s<o-1;s++)for(v=0;v<l-1;v++){b=s*l+(v+1);var H=s*l+v,M=(s+1)*l+v,I=(s+1)*l+(v+1);p.push(b,H,I),p.push(H,M,I),console.log(o,l)}console.log(m),c.setIndex(p),c.addAttribute("position",new q.BufferAttribute(d,3)),c.addAttribute("color",new q.BufferAttribute(u,3));new q.PointsMaterial({size:.06,vertexColors:q.VertexColors}),new q.MeshBasicMaterial({color:16711680});var T=new q.MeshPhongMaterial({specular:1118481,shininess:250,side:q.DoubleSide,vertexColors:q.VertexColors}),S=new q.Mesh(c,T);S.name="toberefreshed1",S.material.transparent=!0,S.material.opacity=.6,this.meshes.push(S)},tempAnchorList:function(){var e=[];return Q.once("value",function(t){t.forEach(function(t){var n={Key:t.key,Data:t.val()};e.push(n)})}),e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())}}},Z={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"rtthreed"}})},staticRenderFns:[]};var ee=n("VU/8")(J,Z,!1,function(e){n("XsXk")},"data-v-66762bc6",null).exports;let te=f.ref("anchors");var ne={name:"field",firebase:{anchors:te},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},tolerance:.15,rotation:0,camera:null,scene:null,renderer:null,meshes:[]}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.anchorManualUpdate()},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.init(),this.constructMeshes(),this.addMeshesToScene(),this.recalc()},methods:{init:function(){let e=document.getElementById("field");this.scene=new q.Scene,this.scene.background=new q.Color(16777215),this.camera=new q.PerspectiveCamera(40,this.WIDTH()/this.HEIGHT(),1,1e3),this.camera.position={x:20,y:20,z:20};let t=new q.Vector3(0,0,0);this.camera.lookAt(t),this.renderer=new q.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),this.renderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.setField(this.tolerance)},addMeshesToScene:function(){for(var e=0;e<this.meshes.length;e++)this.scene.add(this.meshes[e])},animate:function(){setTimeout(function(){console.log("imwaiting")},5e3),requestAnimationFrame(this.animate),this.meshes[0].rotation.y+=.005,this.meshes[1].rotation.y+=.005,this.renderer.render(this.scene,this.camera)},recalc:function(){this.intervalid1=setInterval(()=>{this.anchorManualUpdate();var e=this.scene.getObjectByName("toberefreshed");this.scene.remove(e),this.setField(this.tolerance),this.scene.add(this.meshes[this.meshes.length-1]),this.renderer.render(this.scene,this.camera)},100)},makeBox:function(e,t,n){let i=new q.BoxGeometry(e,t,n),r=new q.LineBasicMaterial({color:16777215,linewidth:1,linecap:"round",linejoin:"round",blending:q.AdditiveBlending,transparent:!0,opacity:.8}),a=new q.Mesh(i,r);this.meshes.push(a)},makePlane:function(e){let t=new q.PlaneGeometry(e,e),n=new q.MeshBasicMaterial({color:13421772,side:q.DoubleSide}),i=new q.Mesh(t,n);i.rotation.x=Math.PI/2,this.meshes.push(i)},makeCube:function(e){var t=this.cube(e),n=new q.LineSegments(t,new q.LineBasicMaterial({color:0,dashSize:.02,gapSize:.01}));n.computeLineDistances(),this.meshes.push(n)},cube:function(e){var t=.5*e,n=new q.BufferGeometry,i=[];return i.push(-t,-t,-t,-t,t,-t,-t,t,-t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,-t,-t,t,-t,t,t,-t,t,t,t,t,t,t,t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,t,-t,t,-t,-t,t,t,t,t,-t,t,t,t,t,-t,-t,t,-t,t),n.addAttribute("position",new q.Float32BufferAttribute(i,3)),n},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},fit:function(e,t,n,i,r){return e>n&&(e=n),e<t&&(e=t),i+(r-i)*(e-t)/(n-t)},setField:function(e){var t=this.anchorManual,n=0,i=0,r=0,a=0;if(t.length>0){n=t[0].Data.x,i=t[0].Data.x,r=t[0].Data.y,a=t[0].Data.y;for(var s=0;s<t.length;s++)t[s].Data.x>i&&(i=t[s].Data.x),t[s].Data.x<n&&(n=t[s].Data.x),t[s].Data.y>a&&(a=t[s].Data.y),t[s].Data.y<r&&(r=t[s].Data.y);n-=2,r-=2,i+=2,a+=2}var o=(i-n)/e,l=(a-r)/e,c=new q.BufferGeometry,h=(new q.Color(1,0,0),o*l),d=new Float32Array(3*h),u=new Float32Array(3*h),p=0;for(s=0;s<o;s++)for(var m=0;m<l;m++){var v,f=s*e,w=m*e,g=0,y=0;for(v=0;v<t.length;v++){var _=t[v].Data,b=Math.pow(_.x-f,2),x=Math.pow(_.y-w,2),D=Math.pow(b+x,.5);if(0==D){g=1e-6,y=_.v;break}var C=Math.pow(D,-3);y+=_.v*C,g+=(1-_.v)*C}var A=y/(y+g),E=this.fit(A,0,1,0,1);d[3*p]=f-.5*o*e,d[3*p+1]=E,d[3*p+2]=w-.5*l*e;u[3*p]=E,u[3*p+1]=0,u[3*p+2]=1-E,p++}c.addAttribute("position",new q.BufferAttribute(d,3)),c.addAttribute("color",new q.BufferAttribute(u,3));var k=new q.PointsMaterial({size:.1,vertexColors:q.VertexColors}),H=new q.Points(c,k);H.name="toberefreshed",this.meshes.push(H),console.log("grid updated")},tempAnchorList:function(){var e=[];return te.once("value",function(t){t.forEach(function(t){var n={Key:t.key,Data:t.val()};e.push(n)})}),e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},viewBox:function(){let e=String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT());return console.log(e),e}}},ie={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"field"}})},staticRenderFns:[]};var re=n("VU/8")(ne,ie,!1,function(e){n("AMBn")},"data-v-03e130ec",null).exports;i.a.use(p.a);let ae=new p.a({routes:[{path:"/",name:"dashboard",component:b,meta:{requiresAuth:!0}},{path:"/threed",name:"threed",component:K,meta:{requiresAuth:!0}},{path:"/field",name:"field",component:re,meta:{requiresAuth:!0}},{path:"/rtthreed",name:"rtthreed",component:ee,meta:{requiresAuth:!0}},{path:"/play",name:"playboard",component:B,meta:{requiresAuth:!0}},{path:"/rtplay",name:"rtplayboard",component:j,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:R,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:L,meta:{requiresGuest:!0}},{path:"/new",name:"new-employee",component:C,meta:{requiresAuth:!0}},{path:"/edit/:employee_id",name:"edit-employee",component:k,meta:{requiresAuth:!0}},{path:"/:employee_id",name:"view-employee",component:I,meta:{requiresAuth:!0}}]});ae.beforeEach((e,t,n)=>{e.matched.some(e=>e.meta.requiresAuth)?a.a.auth().currentUser?n():n({path:"/login",querry:{redirect:e.fullPath}}):e.matched.some(e=>e.meta.requiresGuest)&&a.a.auth().currentUser?(n(),n({path:"/",querry:{redirect:e.fullPath}})):n()});var se=ae;i.a.config.productionTip=!1;var oe=n("KpPp");let le;i.a.use(oe),a.a.auth().onAuthStateChanged(e=>{le||(le=new i.a({el:"#app",router:se,components:{App:u},template:"<App/>"}))})},"WV/5":function(e,t){},XsXk:function(e,t){},dEcQ:function(e,t){e.exports={attributes:{},html:"<h1>im testing mark down</h1>\n<p><em>teesting markdown</em></p>\n"}},uaeV:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c3916cbb1b5ce1fb7f10.js.map