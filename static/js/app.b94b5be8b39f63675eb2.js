webpackJsonp([1],{"4EIz":function(t,e,a){t.exports=a.p+"static/img/SVG.Plan.Back.a154d54.png"},AMBn:function(t,e){},DuPI:function(t,e){},KpPp:function(t,e,a){var r;r=function(){return function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}return a.m=t,a.c=e,a.p="",a(0)}([function(t,e){var a;function r(t){return"function"==typeof t.key?t.key():t.key}function n(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t){var e=t.val(),a=n(e)?e:{".value":e};return a[".key"]=r(t),a}function s(t,e){for(var a=0;a<t.length;a++)if(t[a][".key"]===e)return a;return-1}function o(t,e,a){var o=!1,c=null,h=null;if(n(a)&&a.hasOwnProperty("source")&&(o=a.asObject,c=a.cancelCallback,h=a.readyCallback,a=a.source),!n(a))throw new Error("VueFire: invalid Firebase binding source.");var u,d=("function"==typeof(u=a).ref?u=u.ref():"object"==typeof u.ref&&(u=u.ref),u);t.$firebaseRefs[e]=d,t._firebaseSources[e]=a,c&&(c=c.bind(t)),o?function(t,e,a,r){l(t,e,{});var n=a.on("value",function(a){t[e]=i(a)},r);t._firebaseListeners[e]={value:n}}(t,e,a,c):function(t,e,a,n){var o=[];l(t,e,o);var c=a.on("child_added",function(t,e){var a=e?s(o,e)+1:0;o.splice(a,0,i(t))},n),h=a.on("child_removed",function(t){var e=s(o,r(t));o.splice(e,1)},n),u=a.on("child_changed",function(t){var e=s(o,r(t));o.splice(e,1,i(t))},n),d=a.on("child_moved",function(t,e){var a=s(o,r(t)),n=o.splice(a,1)[0],i=e?s(o,e)+1:0;o.splice(i,0,n)},n);t._firebaseListeners[e]={child_added:c,child_removed:h,child_changed:u,child_moved:d}}(t,e,a,c),h&&a.once("value",h.bind(t))}function l(t,e,r){e in t?t[e]=r:a.util.defineReactive(t,e,r)}function c(t){t.$firebaseRefs||(t.$firebaseRefs=Object.create(null),t._firebaseSources=Object.create(null),t._firebaseListeners=Object.create(null))}var h={created:function(){var t=this.$options.firebase;if("function"==typeof t&&(t=t.call(this)),t)for(var e in c(this),t)o(this,e,t[e])},beforeDestroy:function(){if(this.$firebaseRefs){for(var t in this.$firebaseRefs)this.$firebaseRefs[t]&&this.$unbind(t);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}}};function u(t){(a=t).mixin(h);var e=a.config.optionMergeStrategies;e.firebase=e.provide,a.prototype.$bindAsObject=function(t,e,a,r){c(this),o(this,t,{source:e,asObject:!0,cancelCallback:a,readyCallback:r})},a.prototype.$bindAsArray=function(t,e,a,r){c(this),o(this,t,{source:e,cancelCallback:a,readyCallback:r})},a.prototype.$unbind=function(t){!function(t,e){var a=t._firebaseSources&&t._firebaseSources[e];if(!a)throw new Error('VueFire: unbind failed: "'+e+'" is not bound to a Firebase reference.');var r=t._firebaseListeners[e];for(var n in r)a.off(n,r[n]);t[e]=null,t.$firebaseRefs[e]=null,t._firebaseSources[e]=null,t._firebaseListeners[e]=null}(this,t)}}"undefined"!=typeof window&&window.Vue&&u(window.Vue),t.exports=u}])},t.exports=r()},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("7+uW"),n=a("kxiW"),i=a.n(n),s={name:"navbar",data:()=>({isLoggedIn:!1,currentUser:!1}),created(){i.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=i.a.auth().currentUser.email)},methods:{logout:function(){i.a.auth().signOut().then(()=>{this.$router.push("/login"),window.location.reload(!0)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Playscapes")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarTogglerDemo02"}},[a("ul",{staticClass:"navbar-nav ml-auto mt-2 mt-lg-0"},[t.isLoggedIn?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/rtplay"}},[t._v("RT Playboard")])],1):t._e(),t._v(" "),t.isLoggedIn?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/rtthreed"}},[t._v("RT 3D")])],1):t._e(),t._v(" "),t.isLoggedIn?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v(t._s(t.currentUser))])],1):t._e(),t._v(" "),t.isLoggedIn?t._e():a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Login")])],1),t._v(" "),t.isLoggedIn?t._e():a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),t.isLoggedIn?a("li",{staticClass:"nav-item"},[a("button",{staticClass:"btn btn-outline-dark my-2 my-sm-0",on:{click:t.logout}},[t._v("Logout")])]):t._e()])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]},l={name:"App",components:{Navbar:a("VU/8")(s,o,!1,null,null,null).exports}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Navbar"),this._v(" "),e("div",[e("router-view")],1)],1)},staticRenderFns:[]},h=a("VU/8")(l,c,!1,null,null,null).exports,u=a("/ocq");a("881v");const d=i.a.initializeApp({apiKey:"AIzaSyByLzI8Eab2LALqOIBsNt0Leg6dejb2khc",authDomain:"emergentium-f8068.firebaseapp.com",databaseURL:"https://emergentium-f8068.firebaseio.com",projectId:"emergentium-f8068",storageBucket:"emergentium-f8068.appspot.com",messagingSenderId:"546529349093"});let m=d.firestore(),v=d.database();var p={name:"dashboard",data:()=>({employees:[],isLoggedIn:!1,currentUser:!1}),created(){i.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=i.a.auth().currentUser.email),m.collection("employees").orderBy("employee_id").get().then(t=>{t.forEach(t=>{const e={id:t.id,employee_id:t.data().employee_id,name:t.data().name,dept:t.data().dept};this.employees.push(e)})}),console.log(this.employees)},methods:{logout:function(){i.a.auth().signOut().then(()=>{this.$router.push("/login"),window.location.reload(!0)})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container pt-5",attrs:{id:"dashboard"}},[a("div",{staticClass:"card"},[a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[t._v("Signed in as: "+t._s(t.currentUser))]),t._v(" "),a("button",{staticClass:"list-group-item btn btn-outline-danger",on:{click:t.logout}},[t._v("Sign Out")])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("table",{staticClass:"table table-striped"},[t._m(1),t._v(" "),a("tbody",t._l(t.employees,function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.employee_id))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.dept))]),t._v(" "),a("td",[a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:{name:"view-employee",params:{employee_id:e.employee_id}}}},[t._v("view")])],1)])}),0)]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush"},[a("router-link",{staticClass:"list-group-item btn btn-outline-success",attrs:{to:"/"}},[t._v("Add (to be implemented)")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h4",[this._v("Ongoing Games")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("ID")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Owner")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Overview")])])])}]},g=a("VU/8")(p,f,!1,null,null,null).exports,y={name:"new-employee",data:()=>({employee_id:null,name:null,dept:null}),methods:{saveEmployee(){m.collection("employees").add({employee_id:this.employee_id,name:this.name,dept:this.dept,position:this.position}).then(t=>{this.$router.push("/")}).catch(t=>console.log(err))}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container pt-5",attrs:{id:"new-employee"}},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",{staticClass:"col s12",on:{submit:function(e){return e.preventDefault(),t.saveEmployee(e)}}},[a("div",{staticClass:"input-group mb-3"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee_id,expression:"employee_id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.employee_id},on:{input:function(e){e.target.composing||(t.employee_id=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[t._m(3),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dept,expression:"dept"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.dept},on:{input:function(e){e.target.composing||(t.dept=e.target.value)}}})]),t._v(" "),a("hr"),t._v(" "),a("div",[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),a("router-link",{staticClass:"btn btn-outline-danger",attrs:{to:"/"}},[t._v("Cancel")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h4",[this._v("Edit Player")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Player ID")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Role")])])}]},_=a("VU/8")(y,w,!1,null,null,null).exports,b={name:"edit-employee",data:()=>({employee_id:null,name:null,dept:null,position:null}),beforeRouteEnter(t,e,a){m.collection("employees").where("employee_id","==",t.params.employee_id).get().then(t=>{t.forEach(t=>{a(e=>{e.employee_id=t.data().employee_id,e.name=t.data().name,e.dept=t.data().dept})})})},watch:{$route:"fetchData"},methods:{fetchData(){m.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(t=>{t.forEach(t=>{this.employee_id=t.data().employee_id,this.name=t.data().name,this.dept=t.data().dept})})},updateEmployee(){confirm("Sure?")&&m.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(t=>{t.forEach(t=>{t.ref.update({employee_id:this.employee_id,name:this.name,dept:this.dept}).then(()=>{this.$router.push({name:"view-employee",params:{employee_id:this.employee_id}})})})})}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container pt-5",attrs:{id:"edit-employee"}},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",{staticClass:"col s12",on:{submit:function(e){return e.preventDefault(),t.updateEmployee(e)}}},[a("div",{staticClass:"input-group mb-3"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee_id,expression:"employee_id"}],staticClass:"form-control",attrs:{type:"text",disabled:"",required:""},domProps:{value:t.employee_id},on:{input:function(e){e.target.composing||(t.employee_id=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[t._m(3),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dept,expression:"dept"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.dept},on:{input:function(e){e.target.composing||(t.dept=e.target.value)}}})]),t._v(" "),a("hr"),t._v(" "),a("div",[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),a("router-link",{staticClass:"btn btn-outline-danger",attrs:{to:"/"}},[t._v("Cancel")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h4",[this._v("Edit Game")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Game ID")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Owner")])])}]},D=a("VU/8")(b,x,!1,null,null,null).exports,C={name:"view-employee",data:()=>({employee_id:null,name:null,dept:null}),beforeRouteEnter(t,e,a){m.collection("employees").where("employee_id","==",t.params.employee_id).get().then(t=>{t.forEach(t=>{a(e=>{e.employee_id=t.data().employee_id,e.name=t.data().name,e.dept=t.data().dept})})})},watch:{$route:"fetchData"},methods:{fetchData(){m.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(t=>{t.forEach(t=>{this.employee_id=t.data().employee_id,this.name=t.data().name,this.dept=t.data().dept})})},deleteEmployee(){confirm("Sure?")&&m.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(t=>{t.forEach(t=>{t.ref.delete(),this.$router.push("/")})})},doNothing(){console.log("to be implemented")},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},tempAnchorList:function(){var t=[];return anchorsRef.once("value",function(e){e.forEach(function(e){var a={Key:e.key,Data:e.val()};t.push(a)})}),t}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container pt-5",attrs:{id:"view-employee"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h4",[t._v(t._s(t.name))])]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[t._v("Game ID : "+t._s(t.employee_id))]),t._v(" "),a("li",{staticClass:"list-group-item"},[t._v("Owner : "+t._s(t.dept))]),t._v(" "),a("router-link",{staticClass:"list-group-item btn btn-outline-primary",attrs:{to:"/rtplay"}},[t._v("Playboard")]),t._v(" "),a("router-link",{staticClass:"list-group-item btn btn-outline-warning",attrs:{to:"/rtthreed"}},[t._v("3D (under construction)")])],1)]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"card"},[a("ul",{staticClass:"list-group list-group-flush"},[a("router-link",{staticClass:"list-group-item btn btn-outline-dark",attrs:{to:"/"}},[t._v("Back")]),t._v(" "),a("router-link",{staticClass:"list-group-item btn btn-outline-primary",attrs:{to:{name:"edit-employee",params:{employee_id:t.employee_id}}}},[t._v("Edit Information")]),t._v(" "),a("button",{staticClass:"list-group-item btn btn-outline-danger",on:{click:t.doNothing}},[t._v("Delete (to be implemented)")])],1),t._v(" "),a("div",{staticClass:"fixed-action-btn"},[a("router-link",{staticClass:"btn-floating btn-larg red",attrs:{to:{name:"edit-employee",params:{employee_id:t.employee_id}}}},[a("i",{staticClass:"fa fa-pencil"})])],1)])])},staticRenderFns:[]},I=a("VU/8")(C,A,!1,null,null,null).exports,M={name:"login",data:function(){return{email:"",password:""}},methods:{login:function(t){i.a.auth().signInWithEmailAndPassword(this.email,this.password).then(t=>{window.location.reload(!0),this.$router.push("/")},t=>{alert(t.message)}),t.preventDefault()},register:function(t){i.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(t=>{alert("Account Created"),window.location.reload(!0),this.$router.push("/")},t=>{alert(t.message)}),t.preventDefault()}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container pt-5"},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"input-group mb-3"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("buttun",{staticClass:"btn btn-outline-primary",on:{click:t.login}},[t._v("Sign In")]),t._v(" "),a("buttun",{staticClass:"btn btn-outline-success",on:{click:t.register}},[t._v("Sign Up")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",[this._v("Login")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Email")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Password")])])}]},T=a("VU/8")(M,k,!1,null,null,null).exports,E={name:"register",data:function(){return{email:"",password:""}},methods:{register:function(t){i.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(t=>{alert("Account Created"),window.location.reload(!0),this.$router.push("/")},t=>{alert(t.message)}),t.preventDefault()}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-5"},[a("div",{staticClass:"card text-black bg-light mb-3"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",[a("div",{staticClass:"input-group mb-3"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-group mb-3"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("buttun",{staticClass:"btn btn-outline-success",on:{click:t.register}},[t._v("Register")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",[this._v("Register")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Email")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Password")])])}]},S=a("VU/8")(E,H,!1,null,null,null).exports,P=(a("YrBu"),a("vwbq")),G=(a("M4fF"),{name:"playboard",data:()=>({employees:[],nrad:7,space:1,color:"#aaa",maxID:0,ratio:32,nindex:0,curAnchor:-1,grid:[],anchors:[],window:{width:0,height:0}}),computed:{numi(){return this.window.width/this.ratio},numj(){return this.window.height/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.setGrid(),this.getAnchorLocationFromServer(),this.calculateTheField(),window.addEventListener("keydown",t=>{"s"==t.key&&this.addAnchor(0),"x"==t.key&&this.addAnchor(1),"Backspace"!=t.key&&"d"!=t.key||this.deleteAnchor()})},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(t){var e={id:this.maxID,x:0,y:0,v:t};this.anchors.push(e),this.curAnchor=this.maxID,this.maxID+=1,this.addAnchorToServer(e),this.calculateTheField()},deleteAnchor(){if(-1!=this.curAnchor){var t,e=[];for(t=0;t<this.anchors.length;t++){var a=this.anchors[t];this.curAnchor!=a.id?e.push(a):(this.deleteAnchorFromServer(a),console.log("anchor "+String(a.id)+" deleted"))}this.anchors=e,this.curAnchor=-1,this.calculateTheField()}},getAnchorLocationFromServer:function(){m.collection("anchors").get().then(t=>{t.forEach(t=>{var e=this.setHexColor(t.data().v);t.data().id>this.maxID&&(this.maxID=t.data().id+1);const a={id:t.data().id,x:t.data().x,y:t.data().y,v:t.data().v,c:e};this.anchors.push(a)})})},addAnchorToServer:function(t){m.collection("anchors").add(t)},updateAnchorLocationOnServer:function(t){m.collection("anchors").where("id","==",t.id).get().then(e=>{e.forEach(e=>{e.ref.update({x:t.x,y:t.y})})})},deleteAnchorFromServer:function(t){m.collection("anchors").where("id","==",t.id).get().then(t=>{t.forEach(t=>{t.ref.delete()})})},setHexColor:function(t){return a("YrBu")("hsl("+String(240+120*t)+", 100%, 50%)").toHexString()},handleClickPoint:function(t){var e,a;for(a=0;a<this.anchors.length;a++)this.anchors[a].id==this.curAnchor&&(e=this.anchors[a]);e.x=t.x,e.y=t.y,this.updateAnchorLocationOnServer(e),this.calculateTheField(),console.log("anchor "+String(e.id)+" moved")},handleClickAnchor:function(t){this.curAnchor=t.id,console.log("anchor "+String(t.id)+" selected")},setGrid(){var t,e,a=1;for(t=0;t<this.numi;t++)for(e=0;e<this.numj;e++){var r={id:a+=1,x:t,y:e,v:.5};this.grid.push(r)}},setAnchors(){var t;for(t=0;t<2;t++){var e={id:t,x:t,y:t,v:t};this.anchors.push(e)}},fit:function(t,e,a,r,n){return t>a&&(t=a),t<e&&(t=e),r+(n-r)*(t-e)/(a-e)},calculateTheField(){var t;for(t=0;t<this.grid.length;t++){var e,a=this.grid[t],r=0,n=0;for(e=0;e<this.anchors.length;e++){var i=this.anchors[e],s=Math.pow(i.x-a.x,2),o=Math.pow(i.y-a.y,2),l=Math.pow(s+o,.5);if(0==l){r=1e-6,n=i.v;break}var c=Math.pow(l,-3);n+=i.v*c,r+=(1-i.v)*c}var h=n/(n+r);a.v=this.fit(h,.25,.75,0,1),a.c=this.setHexColor(a.v)}for(e=0;e<this.anchors.length;e++){(i=this.anchors[e]).c=this.setHexColor(i.v)}}}}),R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-5",attrs:{id:"playboard"}},[a("svg",{attrs:{id:"picture",viewBox:"-250 -250 500 500"}},[a("circle",{attrs:{cx:(-1.5-t.numi/2)*(t.nrad+t.space)*2,cy:(.5-t.numj/2)*(t.nrad+t.space)*2,r:2*t.nrad,fill:"blue",stroke:"#999"},on:{click:function(e){return t.addAnchor(0)}}}),t._v(" "),a("circle",{attrs:{cx:(-1.5-t.numi/2)*(t.nrad+t.space)*2,cy:(2.5-t.numj/2)*(t.nrad+t.space)*2,r:2*t.nrad,fill:"red",stroke:"#999"},on:{click:function(e){return t.addAnchor(1)}}}),t._v(" "),a("circle",{attrs:{cx:(-1.5-t.numi/2)*(t.nrad+t.space)*2,cy:(4.5-t.numj/2)*(t.nrad+t.space)*2,r:2*t.nrad,fill:"#333",stroke:"#999"},on:{click:function(e){return t.deleteAnchor()}}}),t._v(" "),t._l(t.grid,function(e){return[a("circle",{key:e.id,attrs:{cx:(e.x-t.numi/2)*(t.nrad+t.space)*2,cy:(e.y-t.numj/2)*(t.nrad+t.space)*2,r:t.nrad,fill:"#ddd",stroke:e.c,"stroke-width":"1.4"},on:{click:function(a){return t.handleClickPoint(e)}}})]}),t._v(" "),t._l(t.anchors,function(e){return[a("circle",{key:-e.id,attrs:{cx:(e.x-t.numi/2)*(t.nrad+t.space)*2,cy:(e.y-t.numj/2)*(t.nrad+t.space)*2,r:t.nrad-2,fill:e.c},on:{click:function(a){return t.handleClickAnchor(e)}}})]})],2)])},staticRenderFns:[]};var L=a("VU/8")(G,R,!1,function(t){a("DuPI")},null,null).exports,F=(a("3Xtx"),a("RKgM"));let B=v.ref("anchors2"),z=v.ref("players");var W={name:"rtplayboard",firebase:{anchors:B,players:z},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchorID:-1,curAnchorIndex:-1,calcCount:0,intervalid1:"",grid:[],borders:[],columns:[],columnsLinks:[],contourGrid:[],contourPoints:[],thresholdPoints:[],anchorManual:[],anchorDataManual:[],anchorManualInteractive:[],window:{width:0,height:0},startTime:0,firstRound:0,allPlayers:[],currentUser:!1,userTeam:-1,userColor:"none",userTotalArea:0,userAnchors:[],colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],tol:1,contourFac:10,ThresholdAt:.7,ThresholdWidth:.01,d3ContourGrid:[],siteImageScaleF:.2,globalScale:2840,globalTransform:"translate(0, 0) ",baseImage:a("4EIz"),gridCSV:[],gridPromise:P.b("https://gist.githubusercontent.com/NourAbuZaid/3636e937bd194a169d2207d32a854ff5/raw/1c644f077974cba7d1a3d5b70f760dca416f8ab7/anchorsGrid.csv"),columnsPromise:P.b("https://gist.githubusercontent.com/NourAbuZaid/2992d40a55891f3ff52a306273528c75/raw/3383c110e5f0b712d0d7e5421bb54c0dda41a925/columns.csv"),bordersPromise:P.b("https://gist.githubusercontent.com/NourAbuZaid/3aececd71ee8e64f2d632b9bda18f29c/raw/8bb553865ac2fa9f94c2ff03175ed65325bae19d/anchorGridBorders.csv")}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){if(i.a.auth().currentUser){this.currentUser=i.a.auth().currentUser.email;var t=this,e=0;z.once("value",function(a){var r=!1;if(a.forEach(function(a){var n=a.val();t.allPlayers.push(n.email),t.currentUser==n.email&&(console.log("Welcome old friend!"),r=!0,t.userTeam=n.v,t.userColor=P.f(n.v)),n.id>e&&(e=n.id)}),!r){console.log("Welcome new player!");const a=Math.random();var n={id:e+1,v:a,email:t.currentUser,color:P.f(a)};z.push(n),console.log("I add this player",n),t.userTeam=n.v,t.userColor=n.color}})}},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),this.setGrid(),this.setBorders(),this.setColumns(),this.setCountourGrid(),this.anchorManualUpdate(),this.anchorManualInteractive=this.anchorManual,this.calculateTheField(),this.ZOOM(),this.recalc()},methods:{recalc:function(){this.intervalid1=setInterval(()=>{var t=this.anchorManual;this.anchorManualUpdate();var e=this.anchorManual;(this.arraysEqual(t,e)||this.calculateTheField(),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.calculateTheField(),this.firstRound=1))},1e3/30)},arraysEqual:function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var a=0;a<t.length;++a){if(t[a].Data.id!==e[a].Data.id)return!1;if(t[a].Data.x!==e[a].Data.x)return!1;if(t[a].Data.y!==e[a].Data.y)return!1;if(t[a].Data.v!==e[a].Data.v)return!1}return!0},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},tempAnchorList:function(){var t=[];return B.once("value",function(e){e.forEach(function(e){var a={Key:e.key,Data:e.val()};t.push(a)})}),t},maxID(){var t,e=1,a=this.anchorManual;for(t=0;t<a.length;t++){var r=a[t].Data;e<=r.id&&(e=r.id+1)}return e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(t){const e=this.userAnchors.length;var a=122+3*Math.random(),r=393+3*Math.random();if(e>0){const t=this.userAnchors[0];a=t.Data.x+10*Math.random()+1,r=t.Data.y+10*Math.random()+1}if(e<4){var n={id:this.maxID(),x:a,y:r,v:t,color:this.userColor,owner:this.currentUser,column:"none"};B.push(n),this.curAnchorID=n.id,console.log("anchor "+this.curAnchorID+" added")}else console.log("You have",e,"anchors, max number is ",4)},deleteAnchor(){var t=0;if(-1!=this.curAnchorID){for(var e=this.anchorManual,a=0;a<e.length;a++){var r=e[a].Data,n=e[a].Key;this.curAnchorID==r.id&&(B.child(n).remove(),t=1)}console.log("anchor "+this.curAnchorID+" deleted!"),this.curAnchorID=-1}else console.log("anchor "+String(this.curAnchorID)+" does not exist anymore");0==t&&console.log("anchor "+String(this.curAnchorID)+" does not exist anymore")},setHexColor:function(t){P.g(t);var e=P.j().domain([0,1]).range(P.l[9])(t);P.k[Math.floor(10*t)];return e},handleClickPoint:function(t){for(var e=0,a=this.anchorManual,r=0;r<a.length;r++){var n=a[r].Data,i=a[r].Key;if(this.curAnchorID==a[r].Data.id){n=a[r].Data,i=a[r].Key,e=1;break}}1==e?(n.x=t.x,n.y=t.y,this.anchorManualInteractive=this.anchorManual,B.child(i).set(n),console.log("anchor "+String(n.id)+" moved"),this.calculateTheField()):(console.log("anchor "+String(this.curAnchorID)+" does not exist anymore"),this.curAnchorID=-1)},handleClickAnchor:function(t){if(t.v==this.userTeam){this.curAnchor=t,this.curAnchorID=t.id,console.log("anchor "+String(t.id)+" selected");for(var e=0;e<this.anchorManualInteractive.length;e++){var a=this.anchorManualInteractive[e].Data;this.curAnchorID==a.id&&(this.curAnchorIndex=e,this.highlightMyAnchors())}}else this.curAnchorID=-1,console.log("that is not your anchor, get out, now"),this.highlightMyAnchors()},setGrid(){var t=this,e=1;this.globalScale;this.gridPromise.then(function(a){for(var r=0;r<a.length;r++){var n={id:e+=1,x:a[r].Px*t.siteImageScaleF,y:a[r].Pz*t.siteImageScaleF,v:.5};t.grid.push(n)}}).then(function(){t.drawBaseGrid()})},setBorders(){var t=this,e=1;this.bordersPromise.then(function(a){for(var r=0;r<a.length;r++){var n={id:e+=1,x:a[r].Px*t.siteImageScaleF,y:a[r].Pz*t.siteImageScaleF,v:.5};t.borders.push(n)}}).then(function(){t.drawBorders()})},getTranslation:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"transform",t);var a,r,n,i=e.transform.baseVal.consolidate().matrix,{a:s,b:o,c:l,d:c,e:h,f:u}=i;return(a=Math.sqrt(s*s+o*o))&&(s/=a,o/=a),(n=s*l+o*c)&&(l-=s*n,c-=o*n),(r=Math.sqrt(l*l+c*c))&&(l/=r,c/=r,n/=r),s*c<o*l&&(s=-s,o=-o,n=-n,a=-a),{translateX:h,translateY:u,rotate:180*Math.atan2(o,s)/Math.PI,skewX:180*Math.atan(n)/Math.PI,scaleX:a,scaleY:r}},setColumns:function(){var t=this,e=1;this.globalScale;const a=this.columnsPromise;this.globalTransform;a.then(function(a){for(var r=0;r<a.length;r++){var n={id:e+=1,x:a[r].Px*t.siteImageScaleF,y:a[r].Pz*t.siteImageScaleF,anchors:[],area:0};t.columns.push(n)}}).then(function(){t.drawColumns()})},evalAnchors:function(){var t=this.anchorManual;this.columns;this.anchorDataManual=[],this.userAnchors=[];for(var e=0;e<t.length;e++){var a=t[e];this.anchorDataManual.push(a.Data),a.Data.owner==this.currentUser&&this.userAnchors.push(a)}},setColumnsLinks:function(){var t=this.anchorManual;this.links=[];for(var e=0;e<t.length;e++){const a=t[e],r=this.anchorClosestColumn(a),n=this.columns[r];a.Data.column=n;const i={x1:a.Data.x,y1:a.Data.y,x2:n.x,y2:n.y,color:a.Data.color};this.links.push(i)}},drawLinks:function(){const t=this.links,e=this;P.m("#linksToColumns").selectAll("line").data(t).join("line").attr("x1",t=>t.x1+2*e.vectorPerLink(t)[0]).attr("y1",t=>t.y1+2*e.vectorPerLink(t)[1]).attr("x2",t=>t.x2).attr("y2",t=>t.y2).attr("stroke",t=>t.color).attr("stroke-width",.2)},highlightMyAnchors:function(){const t=this.userAnchors,e=this;var a;P.m("#anchors-highlights").selectAll("circle").data(t).join("circle").attr("cx",t=>t.Data.x).attr("cy",t=>t.Data.y).attr("r",t=>(t=t,t.Data.id==e.curAnchorID?3:2.5)).attr("fill",t=>t.Data.color).attr("stroke","white").attr("stroke-width",t=>(function(t){return t.Data.id==e.curAnchorID?1:0})(t)).on("click",t=>this.handleClickAnchor(t.Data))},anchorClosestColumn:function(t){for(var e=1e5,a=100,r=this.columns,n=0;n<r.length;n++){var i=r[n];const s=this.calculateDistance(t.Data,i);s<e&&(e=s,a=n)}return a},setCountourGrid(){var t,e,a=1e3,r=this.contourFac;for(t=0;t<this.numi*r;t++)for(e=0;e<this.numj*r;e++){var n={id:a+=1,x:t/r,y:e/r,v:.5};this.contourGrid.push(n)}},fit:function(t,e,a,r,n){return t>a&&(t=a),t<e&&(t=e),r+(n-r)*(t-e)/(a-e)},calculateTheField:function(){this.calcCount+=1,this.evalAnchors(),this.highlightMyAnchors(),this.setColumnsLinks(),this.drawLinks(),this.drawVoronoi(),this.drawColumnsArea(),this.drawAnchors()},calculateContourField:function(){this.contourPoints=[];var t,e=this.anchorManual;for(t=0;t<this.contourGrid.length;t++){var a,r=this.contourGrid[t],n=0,i=0;for(a=0;a<e.length;a++){var s=e[a].Data,o=Math.pow(s.x-r.x,2),l=Math.pow(s.y-r.y,2),c=Math.pow(o+l,.5);if(0==c){n=1e-6,i=s.v;break}var h=Math.pow(c,-3);i+=s.v*h,n+=(1-s.v)*h}var u=i/(i+n);r.v=this.fit(u,0,1,0,1),r.v>=this.ThresholdAt-this.ThresholdWidth&&r.v<=this.ThresholdAt+this.ThresholdWidth&&this.contourPoints.push(r)}this.calcCount+=1},evalIntensity:function(t,e,a){var r,n=0,i=0;for(r=0;r<a.length;r++){var s=a[r].Data,o=Math.pow(s.x-t,2),l=Math.pow(s.y-e,2),c=Math.pow(o+l,.5);if(0==c){n=1e-6,i=s.v;break}var h=Math.pow(c,-3);i+=s.v*h,n+=(1-s.v)*h}var u=i/(i+n);return this.fit(u,0,1,0,1)},drawThresholds2d:function(t){var e=this.anchorManual,a=0,r=0,n=0,i=0;if(e.length>0){a=e[0].Data.x,r=e[0].Data.x,n=e[0].Data.y,i=e[0].Data.y;for(var s=0;s<e.length;s++)e[s].Data.x>r&&(r=e[s].Data.x),e[s].Data.x<a&&(a=e[s].Data.x),e[s].Data.y>i&&(i=e[s].Data.y),e[s].Data.y<n&&(n=e[s].Data.y);a-=2,n-=2,r+=2,i+=2}var o=(r-a)/t,l=(i-n)/t;this.thresholdPoints=[];var c=1e3;for(s=0;s<o;s++)for(var h=0;h<l;h++){c++;var u=s*t,d=h*t,m=this.evalIntensity(u,d,e),v=this.evalIntensity(u+t,d,e);if((m-.5)*(v-.5)<=0){var p=m<v?this.fit(.5,m,v,0,1):this.fit(.5,v,m,1,0),f={id:++c,x:u+p*t,y:d};this.thresholdPoints.push(f)}var g=this.evalIntensity(u,d+t,e);if((m-.5)*(g-.5)<=0){p=m<g?this.fit(.5,m,g,0,1):this.fit(.5,g,m,1,0),f={id:++c,x:u,y:d+p*t};this.thresholdPoints.push(f)}}},calculateContourGrid:function(){const t=this.WIDTH(),e=this.HEIGHT(),a=.065*t,r=.57*e,n=.85*t+28+5,i=.2*e+5,s=Math.ceil((n- -2.5)/5),o=Math.ceil((i- -2.5)/5),l=this.anchorManual,c=new Array(s*o);for(let t=0;t<o;++t)for(let e=0;e<s;++e)c[t*s+e]=this.evalIntensity(5*e-2.5+a,5*t-2.5+r,l);return c.x=-5,c.y=-5,c.k=5,c.n=s,c.m=o,c.xShift=a,c.yShift=r,c},generateContourGeo:function(){const t=this.calculateContourGrid();return P.a().size([t.n,t.m]).thresholds([.25,.5,.75])(t).map(({type:e,value:a,coordinates:r})=>({type:e,value:a,coordinates:r.map(e=>e.map(e=>e.map(([e,a])=>[t.x+t.k*e+t.xShift,t.y+t.k*a+t.yShift])))}))},drawBaseGrid:function(){const t=P.m(".grid_svg"),e=this.grid;t.select("#siteAnchorsGrid").selectAll("circle").data(e).join("circle").attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r",1.5).attr("fill","black").attr("fill-opacity",.05).on("click",t=>this.handleClickPoint(t))},drawBorders:function(){const t=P.m(".grid_svg"),e=this.borders;t.select("#siteBorders").selectAll("circle").data(e).join("circle").attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r",.5).attr("fill","black").attr("fill-opacity",.7)},drawAnchors:function(){const t=this.anchorManual;P.m(".anchors").selectAll("circle").data(t).join("circle").attr("cx",t=>t.Data.x).attr("cy",t=>t.Data.y).attr("r",2).attr("stroke-width",.7).attr("stroke",t=>t.Data.color).attr("fill",t=>t.Data.color).attr("fill-opacity",.1).on("click",t=>this.handleClickAnchor(t.Data))},drawColumns:function(){const t=P.m("#siteColumns");var e=this.columns;t.selectAll("circle").data(e).enter().append("circle").attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r",5).attr("fill","white").attr("class","columns").attr("stroke-width",1).attr("stroke","black")},drawColumnsArea:function(){const t=P.m("#areas-text");var e=this.columns;t.selectAll("text").data(e).join("text").attr("x",t=>t.x-2.5).attr("y",t=>t.y+1.2).text(t=>Math.ceil(.25*t.area)).attr("font-family","sans-serif").attr("font-size","3px").attr("fill","grey")},appendContourGeoToSVG:function(){const t=P.m(".grid_svg"),e=this.generateContourGeo();P.e();var a=P.h().x(t=>t[0]).y(t=>t[1]).curve(P.c);t.select(".d3-contours").attr("fill","none").attr("stroke-opacity",1).selectAll("path").data(e).join("path").attr("fill",t=>this.setHexColor(t.value)).attr("fill-opacity",.3).attr("stroke-width",.5).attr("stroke","black").attr("d",t=>(function(t){for(var e="",r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++)e+=a(n[i]);return e})(t.coordinates))},appendContourGeoToSVG2:function(){const t=P.m(".grid_svg"),e=(this.numi,this.numj,this.nrad,this.space,this.thresholdPoints);t.select(".d3-dots").attr("fill","#555").selectAll("circle").data(e).join("circle").attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r","1").attr("d",P.e())},calcVoronoiCells:function(){const t=this.WIDTH(),e=this.HEIGHT();var a=F.a().extent([[50,380],[t-100,e-150]]).x(t=>t.x).y(t=>t.y),r=this.anchorDataManual;const n=this.columns,i=this.borders;for(var s=a(r.concat(n,i)).polygons(),o={},l={},c=0;c<this.allPlayers.length;c++){var h=this.allPlayers[c];o[h]=[],l[h]=0}for(c=0;c<n.length;c++)this.columns[c].area=0;for(c=0;c<r.length;c++){var u=s[c],d=u.data.owner;o[d].push(u);u.data.column;var m=this.cellToVertices(u),v=this.calcPolygonArea(m);u.data.column.area+=v,l[d]+=v}return this.userTotalArea=l[this.currentUser],this.renderTotalArea(),s},renderTotalArea:function(){const t=P.m("#total-area"),e="Required Modules: "+Math.floor(this.userTotalArea/4),a=this.userColor;t.selectAll("text").data([e]).join("text").text(e).attr("fill",a).attr("font-family","sans-serif").attr("font-size","18px")},drawVoronoi:function(){for(var t=this.anchorDataManual,e=this.calcVoronoiCells(),a=0;a<t.length;a++){var r=t[a];e[a]&&(r.cell=e[a])}var n=P.h(),i=P.m("#voronoi-cells");function s(t){t.attr("stroke","none").attr("fill-opacity",.4).attr("fill",t=>t.color).attr("d",t=>n(t.cell)+"Z")}i=i.selectAll("path").data(t).join("path").call(s)},ZOOM:function(){const t=this.WIDTH(),e=this.HEIGHT(),a=P.n().scaleExtent([1,10]).translateExtent([[-t,-e],[t,e]]).on("zoom",function(){r.attr("transform",P.d.transform)}),r=(P.m(".grid_svg").call(a),P.m(".zoomG"))},WIDTH:function(){return 7948*this.siteImageScaleF},HEIGHT:function(){return 3193*this.siteImageScaleF},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())},calculateDistance:function(t,e){var a=e.x-t.x,r=e.y-t.y;return Math.sqrt(a*a+r*r)},cellToVertices:function(t){for(var e=[],a=0;a<t.length;a++)e.push({x:t[a][0],y:t[a][1]});return e},calcPolygonArea:function(t){for(var e=0,a=0,r=t.length;a<r;a++){e+=t[a].x*t[a==t.length-1?0:a+1].y*.5,e-=t[a==t.length-1?0:a+1].x*t[a].y*.5}return Math.abs(e)},vectorPerLink:function(t){var e=t.x2-t.x1,a=t.y2-t.y1,r=Math.sqrt(e*e+a*a),n=[e/r,a/r];return n}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"rtplayboard"}},[a("svg",{staticClass:"buttons",attrs:{width:"120",height:"60"}},[a("rect",{attrs:{width:"100%",height:"100%",fill:"none",stroke:"none"}}),t._v(" "),a("circle",{attrs:{cx:"30",cy:"30",r:2*t.nrad,fill:t.userColor,stroke:"#999"},on:{click:function(e){return t.addAnchor(t.userTeam)}}}),t._v(" "),a("circle",{attrs:{cx:"90",cy:"30",r:2*t.nrad,fill:"#333   ",stroke:"#999"},on:{click:function(e){return t.deleteAnchor()}}})]),t._v(" "),a("svg",{attrs:{height:"30",width:"200",id:"total-area"}},[a("text",{attrs:{x:"0",y:"30",fill:"black"}})]),t._v(" "),a("svg",{staticClass:"grid_svg",attrs:{width:t.WIDTH(),height:t.HEIGHT()}},[a("rect",{attrs:{width:"100%",height:"100%",fill:"none",stroke:"none"}}),t._v(" "),a("g",{staticClass:"zoomG"},[a("image",{attrs:{id:"site_image",width:t.WIDTH(),height:t.HEIGHT(),href:t.baseImage}}),t._v(" "),a("g",{staticClass:"d3-contours"}),t._v(" "),a("g",{staticClass:"d3-baseGrid"}),t._v(" "),a("canvas",{attrs:{id:"canvas",width:t.WIDTH(),height:t.HEIGHT()}}),t._v(" "),a("g",{attrs:{id:"voronoi"}}),t._v(" "),a("g",{attrs:{id:"voronoi-cells"}}),t._v(" "),a("g",{attrs:{id:"siteAnchorsGrid"}}),t._v(" "),a("g",{attrs:{id:"siteBorders"}}),t._v(" "),a("g",{attrs:{id:"linksToColumns"}}),t._v(" "),a("g",{attrs:{id:"siteColumns"}}),t._v(" "),a("g",{staticClass:"d3-contours-outline"}),t._v(" "),a("g",{staticClass:"d3-dots"}),t._v(" "),a("g",{staticClass:"anchors"}),t._v(" "),a("g",{attrs:{id:"anchors-highlights"}}),t._v(" "),a("g",{attrs:{id:"areas-text"}})])])])},staticRenderFns:[]};var $=a("VU/8")(W,U,!1,function(t){a("Nru2")},null,null).exports,j=a("Ml+6");let q=v.ref("anchors");var N={name:"threed",data:()=>({tolerance:.1,intervalid1:"",anchorManual:[],camera:null,scene:null,renderer:null,meshes:[]}),mounted(){this.recalc(),this.init(),this.tempAnchorList(),this.setAnalysisGrid(this.tolerance),this.constructMeshes(),this.addMeshesToScene(),this.animate()},beforeDestroy(){clearInterval(this.intervalid1)},methods:{init:function(){let t=document.getElementById("threed");this.scene=new j.Scene,this.scene.background=new j.Color(16777215),this.camera=new j.PerspectiveCamera(40,this.WIDTH()/this.HEIGHT(),1,1e3),this.camera.position={x:4,y:4,z:10};let e=new j.Vector3(0,0,0);this.camera.lookAt(e),this.renderer=new j.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),t.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.makeBox(2,2,2),this.makeCube(2.005)},addMeshesToScene:function(){for(var t=0;t<this.meshes.length;t++)this.scene.add(this.meshes[t])},animate:function(){requestAnimationFrame(this.animate),this.meshes[0].rotation.y+=.005,this.meshes[1].rotation.y+=.005,this.renderer.render(this.scene,this.camera)},makeBox:function(t,e,a){let r=new j.BoxGeometry(t,e,a),n=new j.LineBasicMaterial({color:16777215,linewidth:1,linecap:"round",linejoin:"round",blending:j.AdditiveBlending,transparent:!0,opacity:.8}),i=new j.Mesh(r,n);this.meshes.push(i)},makePlane:function(t){let e=new j.PlaneGeometry(t,t),a=new j.MeshBasicMaterial({color:13421772,side:j.DoubleSide}),r=new j.Mesh(e,a);r.rotation.x=Math.PI/2,this.meshes.push(r)},makeCube:function(t){var e=this.cube(t),a=new j.LineSegments(e,new j.LineBasicMaterial({color:0,dashSize:.02,gapSize:.01}));a.computeLineDistances(),this.meshes.push(a)},cube:function(t){var e=.5*t,a=new j.BufferGeometry,r=[];return r.push(-e,-e,-e,-e,e,-e,-e,e,-e,e,e,-e,e,e,-e,e,-e,-e,e,-e,-e,-e,-e,-e,-e,-e,e,-e,e,e,-e,e,e,e,e,e,e,e,e,e,-e,e,e,-e,e,-e,-e,e,-e,-e,-e,-e,-e,e,-e,e,-e,-e,e,e,e,e,-e,e,e,e,e,-e,-e,e,-e,e),a.addAttribute("position",new j.Float32BufferAttribute(r,3)),a},WIDTH:function(){return 2*window.innerWidth},HEIGHT:function(){return 2*(window.innerHeight-62)},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},tempAnchorList:function(){var t=[];return q.once("value",function(e){e.forEach(function(e){var a={Key:e.key,Data:e.val()};t.push(a)})}),t},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},recalc:function(){this.intervalid1=setInterval(()=>{this.anchorManualUpdate(),this.setAnalysisGrid(this.tol)},100)},setAnalysisGrid:function(t){var e=this.anchorManual;if(e.length>0){for(var a,r,n=e[0].Data.x,i=e[0].Data.y,s=0;s<e.length;s++)e[s].Data.x>n&&(n=e[s].Data.x),e[s].Data.x<a&&(a=e[s].Data.x),e[s].Data.y>i&&(i=e[s].Data.y),e[s].Data.y<r&&(r=e[s].Data.y);console.loh("i got here"),console.log(a,n,r,i)}}}},V={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"threed"}})},staticRenderFns:[]};var O=a("VU/8")(N,V,!1,function(t){a("uaeV")},"data-v-7a44f94c",null).exports,K=a("qKrd");const X=a.n(K)()(j);let Y=v.ref("anchors");var Z={name:"rtthreed",firebase:{anchors:Y},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},tolerance:.71,rotation:0,extrusionHeight:1,startTime:0,firstRound:0,camera:null,control:null,scene:null,renderer:null,meshes:[]}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),console.log(X),this.init(),this.constructMeshes(),this.addMeshesToScene(),this.initialRender(),console.log("start"),this.recalc()},methods:{init:function(){let t=document.getElementById("rtthreed");this.scene=new j.Scene,this.scene.background=new j.Color(16777215);var e=new j.AmbientLight(16777215);this.scene.add(e),this.camera=new j.OrthographicCamera(this.WIDTH()/-80,this.WIDTH()/80,this.HEIGHT()/80,this.HEIGHT()/-80,.01,50),this.camera.position.set(16,20,16);let a=new j.Vector3(4,0,4);this.camera.lookAt(a),this.renderer=new j.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),this.renderer.setPixelRatio(window.devicePixelRatio),t.appendChild(this.renderer.domElement),this.controls=new X(this.camera),this.controls.enableZoom=!0,this.controls.enableRotate=!1,this.controls.autoRotate=!1,this.controls.autoRotateSpeed=.5,this.controls.panSpeed=.5,this.controls.rotateSpeed=.7,this.controls.enableDamping=!0,this.controls.dampingFactor=1,this.controls.minPolarAngle=4*-Math.PI/9,this.controls.maxPolarAngle=4*Math.PI/9,this.controls.update(),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.drawThresholds(this.tolerance),this.setField(this.tolerance)},addMeshesToScene:function(){for(var t=0;t<this.meshes.length;t++)this.scene.add(this.meshes[t])},initialRender:function(){this.renderer.render(this.scene,this.camera)},recalc:function(){this.intervalid1=setInterval(()=>{var t=this.anchorManual;this.anchorManualUpdate();var e=this.anchorManual;(this.arraysEqual(t,e)?console.log("no change"):(console.log("updating"),this.toUpdate()),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.toUpdate(),this.firstRound=1));this.controls.update(),this.renderer.render(this.scene,this.camera)},1e3/30)},toUpdate:function(){var t=this.scene.getObjectByName("toberefreshed");this.scene.remove(t);var e=this.scene.getObjectByName("toberefreshed1");this.scene.remove(e),this.drawThresholds(this.tolerance/12),this.scene.add(this.meshes[this.meshes.length-1]),this.setField(this.tolerance),this.scene.add(this.meshes[this.meshes.length-1])},arraysEqual:function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var a=0;a<t.length;++a){if(t[a].Data.id!==e[a].Data.id)return!1;if(t[a].Data.x!==e[a].Data.x)return!1;if(t[a].Data.y!==e[a].Data.y)return!1;if(t[a].Data.v!==e[a].Data.v)return!1}return!0},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},fit:function(t,e,a,r,n){return t>a&&(t=a),t<e&&(t=e),r+(n-r)*(t-e)/(a-e)},drawThresholds:function(t){var e=this.anchorManual,a=0,r=0,n=0,i=0;if(e.length>0){a=e[0].Data.x,r=e[0].Data.x,n=e[0].Data.y,i=e[0].Data.y;for(var s=0;s<e.length;s++)e[s].Data.x>r&&(r=e[s].Data.x),e[s].Data.x<a&&(a=e[s].Data.x),e[s].Data.y>i&&(i=e[s].Data.y),e[s].Data.y<n&&(n=e[s].Data.y);a-=2,n-=2,r+=2,i+=2}var o=(r-a)/t,l=(i-n)/t,c=new j.BufferGeometry,h=[],u=1;for(s=0;s<o;s++)for(var d=0;d<l;d++){var m=s*t,v=d*t,p=this.evalIntensity(m,v,e),f=this.evalIntensity(m+t,v,e);if((p-.5)*(f-.5)<=0){var g=m+(p<f?this.fit(.5,p,f,0,1):this.fit(.5,f,p,1,0))*t,y=v;h.push(g+a,0,y+n),h.push(g+a,this.extrusionHeight,y+n),u++}var w=this.evalIntensity(m,v+t,e);if((p-.5)*(w-.5)<=0){y=v+(p<w?this.fit(.5,p,w,0,1):this.fit(.5,w,p,1,0))*t,g=m;h.push(g+a,0,y+n),h.push(g+a,this.extrusionHeight,y+n),u++}}var _=new Float32Array(3*u*2);for(s=0;s<3*u*2;s++)_[s]=h[s];c.addAttribute("position",new j.BufferAttribute(_,3));var b=new j.LineSegments(c,new j.LineBasicMaterial({color:0}));b.name="toberefreshed",this.meshes.push(b)},evalIntensity:function(t,e,a){var r,n=0,i=0;for(r=0;r<a.length;r++){var s=a[r].Data,o=Math.pow(s.x-t,2),l=Math.pow(s.y-e,2),c=Math.pow(o+l,.5);if(0==c){n=1e-6,i=s.v;break}var h=Math.pow(c,-3);i+=s.v*h,n+=(1-s.v)*h}var u=i/(i+n);return this.fit(u,0,1,0,1)},setField:function(t){var e=this.anchorManual,a=0,r=0,n=0,i=0;if(e.length>0){a=e[0].Data.x,r=e[0].Data.x,n=e[0].Data.y,i=e[0].Data.y;for(var s=0;s<e.length;s++)e[s].Data.x>r&&(r=e[s].Data.x),e[s].Data.x<a&&(a=e[s].Data.x),e[s].Data.y>i&&(i=e[s].Data.y),e[s].Data.y<n&&(n=e[s].Data.y);a-=2,n-=2,r+=2,i+=2}var o=Math.ceil((r-a)/t),l=Math.ceil((i-n)/t),c=new j.BufferGeometry,h=(new j.Color(1,0,0),o*l),u=new Float32Array(3*h),d=new Float32Array(3*h),m=[],v=0;for(s=0;s<o;s++)for(var p=0;p<l;p++){var f,g=s*t,y=p*t,w=0,_=0;for(f=0;f<e.length;f++){var b=e[f].Data,x=Math.pow(b.x-g,2),D=Math.pow(b.y-y,2),C=Math.pow(x+D,.5);if(0==C){w=1e-6,_=b.v;break}var A=Math.pow(C,-3);_+=b.v*A,w+=(1-b.v)*A}var I=_/(_+w),M=this.fit(I,0,1,0,1);u[3*v]=g+a,u[3*v+1]=0,u[3*v+2]=y+n;d[3*v]=M,d[3*v+1]=0,d[3*v+2]=1-M,v++}for(s=0;s<o-1;s++)for(p=0;p<l-1;p++){b=s*l+(p+1);var k=s*l+p,T=(s+1)*l+p,E=(s+1)*l+(p+1);m.push(b,k,E),m.push(k,T,E),console.log(o,l)}console.log(v),c.setIndex(m),c.addAttribute("position",new j.BufferAttribute(u,3)),c.addAttribute("color",new j.BufferAttribute(d,3));new j.PointsMaterial({size:.06,vertexColors:j.VertexColors}),new j.MeshBasicMaterial({color:16711680});var H=new j.MeshPhongMaterial({specular:1118481,shininess:250,side:j.DoubleSide,vertexColors:j.VertexColors}),S=new j.Mesh(c,H);S.name="toberefreshed1",S.material.transparent=!0,S.material.opacity=.6,this.meshes.push(S)},tempAnchorList:function(){var t=[];return Y.once("value",function(e){e.forEach(function(e){var a={Key:e.key,Data:e.val()};t.push(a)})}),t},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())}}},Q={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"rtthreed"}})},staticRenderFns:[]};var J=a("VU/8")(Z,Q,!1,function(t){a("XsXk")},"data-v-66762bc6",null).exports;let tt=v.ref("anchors");var et={name:"field",firebase:{anchors:tt},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},tolerance:.15,rotation:0,camera:null,scene:null,renderer:null,meshes:[]}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.anchorManualUpdate()},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.init(),this.constructMeshes(),this.addMeshesToScene(),this.recalc()},methods:{init:function(){let t=document.getElementById("field");this.scene=new j.Scene,this.scene.background=new j.Color(16777215),this.camera=new j.PerspectiveCamera(40,this.WIDTH()/this.HEIGHT(),1,1e3),this.camera.position={x:20,y:20,z:20};let e=new j.Vector3(0,0,0);this.camera.lookAt(e),this.renderer=new j.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),this.renderer.setPixelRatio(window.devicePixelRatio),t.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.setField(this.tolerance)},addMeshesToScene:function(){for(var t=0;t<this.meshes.length;t++)this.scene.add(this.meshes[t])},animate:function(){setTimeout(function(){console.log("imwaiting")},5e3),requestAnimationFrame(this.animate),this.meshes[0].rotation.y+=.005,this.meshes[1].rotation.y+=.005,this.renderer.render(this.scene,this.camera)},recalc:function(){this.intervalid1=setInterval(()=>{this.anchorManualUpdate();var t=this.scene.getObjectByName("toberefreshed");this.scene.remove(t),this.setField(this.tolerance),this.scene.add(this.meshes[this.meshes.length-1]),this.renderer.render(this.scene,this.camera)},100)},makeBox:function(t,e,a){let r=new j.BoxGeometry(t,e,a),n=new j.LineBasicMaterial({color:16777215,linewidth:1,linecap:"round",linejoin:"round",blending:j.AdditiveBlending,transparent:!0,opacity:.8}),i=new j.Mesh(r,n);this.meshes.push(i)},makePlane:function(t){let e=new j.PlaneGeometry(t,t),a=new j.MeshBasicMaterial({color:13421772,side:j.DoubleSide}),r=new j.Mesh(e,a);r.rotation.x=Math.PI/2,this.meshes.push(r)},makeCube:function(t){var e=this.cube(t),a=new j.LineSegments(e,new j.LineBasicMaterial({color:0,dashSize:.02,gapSize:.01}));a.computeLineDistances(),this.meshes.push(a)},cube:function(t){var e=.5*t,a=new j.BufferGeometry,r=[];return r.push(-e,-e,-e,-e,e,-e,-e,e,-e,e,e,-e,e,e,-e,e,-e,-e,e,-e,-e,-e,-e,-e,-e,-e,e,-e,e,e,-e,e,e,e,e,e,e,e,e,e,-e,e,e,-e,e,-e,-e,e,-e,-e,-e,-e,-e,e,-e,e,-e,-e,e,e,e,e,-e,e,e,e,e,-e,-e,e,-e,e),a.addAttribute("position",new j.Float32BufferAttribute(r,3)),a},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},fit:function(t,e,a,r,n){return t>a&&(t=a),t<e&&(t=e),r+(n-r)*(t-e)/(a-e)},setField:function(t){var e=this.anchorManual,a=0,r=0,n=0,i=0;if(e.length>0){a=e[0].Data.x,r=e[0].Data.x,n=e[0].Data.y,i=e[0].Data.y;for(var s=0;s<e.length;s++)e[s].Data.x>r&&(r=e[s].Data.x),e[s].Data.x<a&&(a=e[s].Data.x),e[s].Data.y>i&&(i=e[s].Data.y),e[s].Data.y<n&&(n=e[s].Data.y);a-=2,n-=2,r+=2,i+=2}var o=(r-a)/t,l=(i-n)/t,c=new j.BufferGeometry,h=(new j.Color(1,0,0),o*l),u=new Float32Array(3*h),d=new Float32Array(3*h),m=0;for(s=0;s<o;s++)for(var v=0;v<l;v++){var p,f=s*t,g=v*t,y=0,w=0;for(p=0;p<e.length;p++){var _=e[p].Data,b=Math.pow(_.x-f,2),x=Math.pow(_.y-g,2),D=Math.pow(b+x,.5);if(0==D){y=1e-6,w=_.v;break}var C=Math.pow(D,-3);w+=_.v*C,y+=(1-_.v)*C}var A=w/(w+y),I=this.fit(A,0,1,0,1);u[3*m]=f-.5*o*t,u[3*m+1]=I,u[3*m+2]=g-.5*l*t;d[3*m]=I,d[3*m+1]=0,d[3*m+2]=1-I,m++}c.addAttribute("position",new j.BufferAttribute(u,3)),c.addAttribute("color",new j.BufferAttribute(d,3));var M=new j.PointsMaterial({size:.1,vertexColors:j.VertexColors}),k=new j.Points(c,M);k.name="toberefreshed",this.meshes.push(k),console.log("grid updated")},tempAnchorList:function(){var t=[];return tt.once("value",function(e){e.forEach(function(e){var a={Key:e.key,Data:e.val()};t.push(a)})}),t},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},viewBox:function(){let t=String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT());return console.log(t),t}}},at={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"field"}})},staticRenderFns:[]};var rt=a("VU/8")(et,at,!1,function(t){a("AMBn")},"data-v-03e130ec",null).exports,nt={name:"newItem",data:()=>({seen:!0,message:"Title Description using v-bind",content:"This is a Paragraph"}),methods:{updateMessage:function(){this.content="Now edited!"}}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.seen?a("div",{staticClass:"newItem",attrs:{title:t.message}},[a("p",{staticClass:"bg-warning",on:{click:t.updateMessage}},[t._v(t._s(t.content))]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.updateMessage}},[t._v(" Update Messeage")])]):t._e()},staticRenderFns:[]};var st=a("VU/8")(nt,it,!1,function(t){a("r/0L")},"data-v-6c0c9932",null).exports;let ot=v.ref("anchors");var lt={name:"Nours",components:{newItem:st},firebase:{anchors:ot},data:()=>({palette:["INDIANRED","SALMON","DARKSALMON","LIGHTSALMON","DARKRED"],BrushColor:"black",employees:[],nrad:10,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},startTime:0,firstRound:0}),computed:{numi:()=>10,numj:()=>10},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),window.addEventListener("keydown",t=>{"s"==t.key&&this.addAnchor(0),"x"==t.key&&this.addAnchor(1),"Backspace"!=t.key&&"d"!=t.key||this.deleteAnchor()})},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),this.setGrid(),this.anchorManualUpdate(),this.calculateTheField(),this.recalc()},methods:{colorPoint:function(t){t.color==this.BrushColor?t.color="white":t.color=this.BrushColor},updateBrush:function(t){this.BrushColor=this.palette[t]},myGrid:function(){},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},recalc:function(){this.intervalid1=setInterval(()=>{var t=this.anchorManual;this.anchorManualUpdate();var e=this.anchorManual;(this.arraysEqual(t,e)||this.calculateTheField(),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.calculateTheField(),this.firstRound=1))},1e3/30)},arraysEqual:function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var a=0;a<t.length;++a){if(t[a].Data.id!==e[a].Data.id)return!1;if(t[a].Data.x!==e[a].Data.x)return!1;if(t[a].Data.y!==e[a].Data.y)return!1;if(t[a].Data.v!==e[a].Data.v)return!1}return!0},maxID(){var t,e=1,a=this.anchorManual;for(t=0;t<a.length;t++){var r=a[t].Data;e<=r.id&&(e=r.id+1)}return e},tempAnchorList:function(){var t=[];return ot.once("value",function(e){e.forEach(function(e){var a={Key:e.key,Data:e.val()};t.push(a)})}),t},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(t){var e={id:this.maxID(),x:0,y:0,v:t};ot.push(e),this.curAnchor=e.id,console.log("anchor "+this.curAnchor+" added")},deleteAnchor(){var t=0;if(-1!=this.curAnchor){for(var e=this.anchorManual,a=0;a<e.length;a++){var r=e[a].Data,n=e[a].Key;this.curAnchor==r.id&&(ot.child(n).remove(),t=1)}console.log("anchor "+this.curAnchor+" added"),this.curAnchor=-1}else console.log("anchor "+String(this.curAnchor)+" does not exist anymore");0==t&&console.log("anchor "+String(this.curAnchor)+" does not exist anymore")},setHexColor:function(t){return a("YrBu")("hsl("+String(240+120*t)+", 100%, 50%)").toHexString()},setHexColorPlusUpdates:function(t){var e=a("YrBu"),r="hsl("+String(240+120*t)+", 100%, 50%)";return this.calculateTheField(),e(r).toHexString()},handleClickPoint:function(t){for(var e=0,a=this.anchorManual,r=0;r<a.length;r++){var n=a[r].Data,i=a[r].Key;if(this.curAnchor==a[r].Data.id){n=a[r].Data,i=a[r].Key,e=1;break}}1==e?(n.x=t.x,n.y=t.y,ot.child(i).set(n),console.log("anchor "+String(n.id)+" moved"),this.calculateTheField()):(console.log("anchor "+String(this.curAnchor)+" does not exist anymore"),this.curAnchor=-1)},handleClickAnchor:function(t){this.curAnchor=t.id,console.log("anchor "+String(t.id)+" selected")},setGrid(){var t,e,a=1;for(t=0;t<this.numi;t++)for(e=0;e<this.numj;e++){var r={id:a+=1,x:t,y:e,v:.5,color:"white"};this.grid.push(r)}},fit:function(t,e,a,r,n){return t>a&&(t=a),t<e&&(t=e),r+(n-r)*(t-e)/(a-e)},calculateTheField:function(){var t,e=this.anchorManual;for(t=0;t<this.grid.length;t++){var a,r=this.grid[t],n=0,i=0;for(a=0;a<e.length;a++){var s=e[a].Data,o=Math.pow(s.x-r.x,2),l=Math.pow(s.y-r.y,2),c=Math.pow(o+l,.5);if(0==c){n=1e-6,i=s.v;break}var h=Math.pow(c,-3);i+=s.v*h,n+=(1-s.v)*h}var u=i/(i+n);r.v=this.fit(u,0,1,0,1)}this.calcCount+=1},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"testComp"}},[a("svg",{staticClass:"svg-container",attrs:{width:"600",height:"600"}},[a("g",{attrs:{transform:"translate(200 200)"}},[t._l(t.palette,function(e,r){return[a("circle",{key:r,attrs:{cx:(-1.5-(t.numi-2)/2)*(t.nrad+t.space)*2,cy:(r-t.numj/2)*(t.nrad+t.space)*2,r:2*t.nrad,fill:t.palette[r]},on:{click:function(e){return t.updateBrush(r)}}})]})],2),t._v(" "),a("g",{attrs:{transform:"translate(300 300)"}},[t._l(t.grid,function(e){return[a("circle",{key:e.id,attrs:{cx:(e.x-t.numi/2)*(t.nrad+t.space)*2,cy:(e.y-t.numj/2)*(t.nrad+t.space)*2,r:t.nrad-1,fill:e.color},on:{click:function(a){return t.colorPoint(e)}}})]})],2)]),t._v(" "),a("ul",{staticClass:"list-group-flush"},[t._m(0),t._v(" "),t._l(t.anchorManual,function(e){return a("li",{key:e.key,staticClass:"list-group-item"},[t._v("\n            "+t._s(e.Data.x)+", "+t._s(e.Data.y)+" : "+t._s(e.Data.v)+" \n        ")])})],2),t._v(" "),a("newItem")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"list-group-item list-group-item-info"},[e("h4",[this._v("Nodes")])])}]};var ht=a("VU/8")(lt,ct,!1,function(t){a("QfUQ")},"data-v-3c43032a",null).exports;r.a.use(u.a);let ut=new u.a({routes:[{path:"/",name:"dashboard",component:g,meta:{requiresAuth:!0}},{path:"/nours",name:"nours",component:ht,meta:{requiresAuth:!0}},{path:"/threed",name:"threed",component:O,meta:{requiresAuth:!0}},{path:"/field",name:"field",component:rt,meta:{requiresAuth:!0}},{path:"/rtthreed",name:"rtthreed",component:J,meta:{requiresAuth:!0}},{path:"/play",name:"playboard",component:L,meta:{requiresAuth:!0}},{path:"/rtplay",name:"rtplayboard",component:$,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:T,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:S,meta:{requiresGuest:!0}},{path:"/new",name:"new-employee",component:_,meta:{requiresAuth:!0}},{path:"/edit/:employee_id",name:"edit-employee",component:D,meta:{requiresAuth:!0}},{path:"/:employee_id",name:"view-employee",component:I,meta:{requiresAuth:!0}}]});ut.beforeEach((t,e,a)=>{t.matched.some(t=>t.meta.requiresAuth)?i.a.auth().currentUser?a():a({path:"/login",querry:{redirect:t.fullPath}}):t.matched.some(t=>t.meta.requiresGuest)&&i.a.auth().currentUser?(a(),a({path:"/",querry:{redirect:t.fullPath}})):a()});var dt=ut;r.a.config.productionTip=!1;var mt=a("KpPp");let vt;r.a.use(mt),i.a.auth().onAuthStateChanged(t=>{vt||(vt=new r.a({el:"#app",router:dt,components:{App:h},template:"<App/>"}))})},Nru2:function(t,e){},QfUQ:function(t,e){},XsXk:function(t,e){},"r/0L":function(t,e){},uaeV:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b94b5be8b39f63675eb2.js.map